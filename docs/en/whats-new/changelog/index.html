<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-en/whats-new/changelog/index">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">2023 Changelog | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/img/logo.png"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/en/whats-new/changelog/"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="2023 Changelog | ClickHouse Docs"><meta data-rh="true" name="description" content="ClickHouse release 23.2, 2023-02-23"><meta data-rh="true" property="og:description" content="ClickHouse release 23.2, 2023-02-23"><link data-rh="true" rel="icon" href="/AlgoliaDocsSelfCrawl/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/en/whats-new/changelog/"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/en/whats-new/changelog/" hreflang="en"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/en/whats-new/changelog/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://62VCH2MD74-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/AlgoliaDocsSelfCrawl/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/AlgoliaDocsSelfCrawl/assets/css/styles.1fe1f09b.css">
<link rel="preload" href="/AlgoliaDocsSelfCrawl/assets/js/runtime~main.be802059.js" as="script">
<link rel="preload" href="/AlgoliaDocsSelfCrawl/assets/js/main.b00bfaaf.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/AlgoliaDocsSelfCrawl/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/AlgoliaDocsSelfCrawl/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ClickHouse</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Open Source</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Company</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/company/our-story" target="_blank" rel="noopener noreferrer" class="dropdown__link">Our story</a></li><li><a href="https://clickhouse.com/company/careers" target="_blank" rel="noopener noreferrer" class="dropdown__link">Careers</a></li><li><a href="https://clickhouse.com/company/contact" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact us</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">News and events</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Learn</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/AlgoliaDocsSelfCrawl/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li></ul></div><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div><div class="navbar__items navbar__items--right"><a href="https://clickhouse.cloud/signUp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-signup-button">Try for Free<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Language</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/AlgoliaDocsSelfCrawl/en/intro">English</a></li><li><a class="dropdown__link" href="/AlgoliaDocsSelfCrawl/ru">Russian</a></li><li><a class="dropdown__link" href="/AlgoliaDocsSelfCrawl/zh">Chinese</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/AlgoliaDocsSelfCrawl/en/intro">What is ClickHouse?</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/AlgoliaDocsSelfCrawl/en/about-us/cloud">About Us</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/about-us/cloud">Cloud Service</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/about-us/support">Cloud Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/about-us/history">ClickHouse History</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/about-us/distinctive-features">Distinctive Features</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/about-us/adopters">Adopters</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/about-us/performance">Performance</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/AlgoliaDocsSelfCrawl/en/quick-start">Get Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Get Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/quick-start">Cloud Quick Start</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/get-started/sql-console/opening">SQL console</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQL console&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/getting-started/example-datasets/">Tutorials and Datasets</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials and Datasets&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/integrations/intro">Integrations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/install">Install</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/cloud/overview">Cloud</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cloud&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/integrations/connect-a-client">Connect a Client</a><button aria-label="Toggle the collapsible sidebar category &#x27;Connect a Client&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/integrations/data-ingestion">Ingest</a><button aria-label="Toggle the collapsible sidebar category &#x27;Ingest&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/integrations/data-visualization">Visualize</a><button aria-label="Toggle the collapsible sidebar category &#x27;Visualize&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/integrations/migration/">Migrate</a><button aria-label="Toggle the collapsible sidebar category &#x27;Migrate&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/optimize">Optimize</a><button aria-label="Toggle the collapsible sidebar category &#x27;Optimize&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/manage">Manage</a><button aria-label="Toggle the collapsible sidebar category &#x27;Manage&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/analyze">SQL</a><button aria-label="Toggle the collapsible sidebar category &#x27;SQL&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/development">Contribute</a><button aria-label="Toggle the collapsible sidebar category &#x27;Contribute&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/AlgoliaDocsSelfCrawl/en/faq">FAQ</a><button aria-label="Toggle the collapsible sidebar category &#x27;FAQ&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/AlgoliaDocsSelfCrawl/en/whats-new">What&#x27;s New</a><button aria-label="Toggle the collapsible sidebar category &#x27;What&#x27;s New&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/AlgoliaDocsSelfCrawl/category/changelog">Changelog</a><button aria-label="Toggle the collapsible sidebar category &#x27;Changelog&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/cloud">Cloud</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/">2023</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/2022">2022</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/2021">2021</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/2020">2020</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/2019">2019</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/2018">2018</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/2017">2017</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/security-changelog">Security Changelog</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/AlgoliaDocsSelfCrawl/en/whats-new/roadmap">Roadmap</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/AlgoliaDocsSelfCrawl/en/whats-new"><span itemprop="name">What&#x27;s New</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/AlgoliaDocsSelfCrawl/category/changelog"><span itemprop="name">Changelog</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">2023</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>2023 Changelog</h1></header><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-clickhouse-release-232-2023-02-23"><a id="232"></a> ClickHouse release 23.2, 2023-02-23<a href="#-clickhouse-release-232-2023-02-23" class="hash-link" aria-label="Direct link to -clickhouse-release-232-2023-02-23" title="Direct link to -clickhouse-release-232-2023-02-23">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="backward-incompatible-change">Backward Incompatible Change<a href="#backward-incompatible-change" class="hash-link" aria-label="Direct link to Backward Incompatible Change" title="Direct link to Backward Incompatible Change">​</a></h4><ul><li>Extend function &quot;toDayOfWeek()&quot; (alias: &quot;DAYOFWEEK&quot;) with a mode argument that encodes whether the week starts on Monday or Sunday and whether counting starts at 0 or 1. For consistency with other date time functions, the mode argument was inserted between the time and the time zone arguments. This breaks existing usage of the (previously undocumented) 2-argument syntax &quot;toDayOfWeek(time, time_zone)&quot;. A fix is to rewrite the function into &quot;toDayOfWeek(time, 0, time_zone)&quot;. <a href="https://github.com/ClickHouse/ClickHouse/pull/45233" target="_blank" rel="noopener noreferrer">#45233</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Rename setting <code>max_query_cache_size</code> to <code>filesystem_cache_max_download_size</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45614" target="_blank" rel="noopener noreferrer">#45614</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>The <code>default</code> user will not have permission for access type <code>SHOW NAMED COLLECTION</code> by default (e.g. <code>default</code> user will no longer be able to grant ALL to other users as it was before, therefore this PR is backward incompatible). <a href="https://github.com/ClickHouse/ClickHouse/pull/46010" target="_blank" rel="noopener noreferrer">#46010</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>If the SETTINGS clause is specified before the FORMAT clause, the settings will be applied to formatting as well. <a href="https://github.com/ClickHouse/ClickHouse/pull/46003" target="_blank" rel="noopener noreferrer">#46003</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Remove support for setting <code>materialized_postgresql_allow_automatic_update</code> (which was by default turned off). <a href="https://github.com/ClickHouse/ClickHouse/pull/46106" target="_blank" rel="noopener noreferrer">#46106</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Slightly improve the performance of <code>countDigits</code> on realistic datasets. This closed <a href="https://github.com/ClickHouse/ClickHouse/issues/44518" target="_blank" rel="noopener noreferrer">#44518</a>. In previous versions, <code>countDigits(0)</code> returned <code>0</code>; now it returns <code>1</code>, which is more correct and follows the existing documentation. <a href="https://github.com/ClickHouse/ClickHouse/pull/46187" target="_blank" rel="noopener noreferrer">#46187</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Disallow the creation of new columns compressed by a combination of codecs &quot;Delta&quot; or &quot;DoubleDelta&quot; followed by codecs &quot;Gorilla&quot; or &quot;FPC&quot;. This can be bypassed using the setting &quot;allow_suspicious_codecs = true&quot;. <a href="https://github.com/ClickHouse/ClickHouse/pull/45652" target="_blank" rel="noopener noreferrer">#45652</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-feature">New Feature<a href="#new-feature" class="hash-link" aria-label="Direct link to New Feature" title="Direct link to New Feature">​</a></h4><ul><li>Add <code>StorageIceberg</code> and table function <code>iceberg</code> to access iceberg table store on S3. <a href="https://github.com/ClickHouse/ClickHouse/pull/45384" target="_blank" rel="noopener noreferrer">#45384</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Allow configuring storage as <code>SETTINGS disk = &#x27;&lt;disk_name&gt;&#x27;</code> (instead of <code>storage_policy</code>) and with explicit disk creation <code>SETTINGS disk = disk(type=s3, ...)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/41976" target="_blank" rel="noopener noreferrer">#41976</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Expose <code>ProfileEvents</code> counters in <code>system.part_log</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/38614" target="_blank" rel="noopener noreferrer">#38614</a> (<a href="https://github.com/bharatnc" target="_blank" rel="noopener noreferrer">Bharat Nallan</a>).</li><li>Enrichment of the existing <code>ReplacingMergeTree</code> engine to allow duplicate insertion. It leverages the power of both <code>ReplacingMergeTree</code> and <code>CollapsingMergeTree</code> in one MergeTree engine. Deleted data are not returned when queried, but not removed from disk either. <a href="https://github.com/ClickHouse/ClickHouse/pull/41005" target="_blank" rel="noopener noreferrer">#41005</a> (<a href="https://github.com/youennL-cs" target="_blank" rel="noopener noreferrer">youennL-cs</a>).</li><li>Add <code>generateULID</code> function. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/36536" target="_blank" rel="noopener noreferrer">#36536</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44662" target="_blank" rel="noopener noreferrer">#44662</a> (<a href="https://github.com/evillique" target="_blank" rel="noopener noreferrer">Nikolay Degterinsky</a>).</li><li>Add <code>corrMatrix</code> aggregate function, calculating each two columns. In addition, since Aggregatefunctions <code>covarSamp</code> and <code>covarPop</code> are similar to <code>corr</code>, I add <code>covarSampMatrix</code>, <code>covarPopMatrix</code> by the way. @alexey-milovidov closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44587" target="_blank" rel="noopener noreferrer">#44587</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44680" target="_blank" rel="noopener noreferrer">#44680</a> (<a href="https://github.com/FFFFFFFHHHHHHH" target="_blank" rel="noopener noreferrer">FFFFFFFHHHHHHH</a>).</li><li>Introduce the arrayShuffle function for random array permutations. <a href="https://github.com/ClickHouse/ClickHouse/pull/45271" target="_blank" rel="noopener noreferrer">#45271</a> (<a href="https://github.com/jh0x" target="_blank" rel="noopener noreferrer">Joanna Hulboj</a>).</li><li>Support types <code>FIXED_SIZE_BINARY</code> type in Arrow, <code>FIXED_LENGTH_BYTE_ARRAY</code> in <code>Parquet</code> and match them to <code>FixedString</code>. Add settings <code>output_format_parquet_fixed_string_as_fixed_byte_array/output_format_arrow_fixed_string_as_fixed_byte_array</code> to control the default output type for FixedString. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45326" target="_blank" rel="noopener noreferrer">#45326</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45340" target="_blank" rel="noopener noreferrer">#45340</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Add a new column <code>last_exception_time</code> to system.replication_queue. <a href="https://github.com/ClickHouse/ClickHouse/pull/45457" target="_blank" rel="noopener noreferrer">#45457</a> (<a href="https://github.com/FrankChen021" target="_blank" rel="noopener noreferrer">Frank Chen</a>).</li><li>Add two new functions which allow for user-defined keys/seeds with SipHash{64,128}. <a href="https://github.com/ClickHouse/ClickHouse/pull/45513" target="_blank" rel="noopener noreferrer">#45513</a> (<a href="https://github.com/aiven-sal" target="_blank" rel="noopener noreferrer">Salvatore Mesoraca</a>).</li><li>Allow a three-argument version for table function <code>format</code>. close <a href="https://github.com/ClickHouse/ClickHouse/issues/45808" target="_blank" rel="noopener noreferrer">#45808</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45873" target="_blank" rel="noopener noreferrer">#45873</a> (<a href="https://github.com/FFFFFFFHHHHHHH" target="_blank" rel="noopener noreferrer">FFFFFFFHHHHHHH</a>).</li><li>Add <code>JodaTime</code> format support for &#x27;x&#x27;,&#x27;w&#x27;,&#x27;S&#x27;. Refer to <a href="https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html" target="_blank" rel="noopener noreferrer">https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46073" target="_blank" rel="noopener noreferrer">#46073</a> (<a href="https://github.com/zk-kiger" target="_blank" rel="noopener noreferrer">zk_kiger</a>).</li><li>Support window function <code>ntile</code>.</li><li>Add setting <code>final</code> to implicitly apply the <code>FINAL</code> modifier to every table. <a href="https://github.com/ClickHouse/ClickHouse/pull/40945" target="_blank" rel="noopener noreferrer">#40945</a> (<a href="https://github.com/arthurpassos" target="_blank" rel="noopener noreferrer">Arthur Passos</a>).</li><li>Added <code>arrayPartialSort</code> and <code>arrayPartialReverseSort</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/46296" target="_blank" rel="noopener noreferrer">#46296</a> (<a href="https://github.com/jh0x" target="_blank" rel="noopener noreferrer">Joanna Hulboj</a>).</li><li>The new http parameter <code>client_protocol_version</code> allows setting a client protocol version for HTTP responses using the Native format. <a href="https://github.com/ClickHouse/ClickHouse/issues/40397" target="_blank" rel="noopener noreferrer">#40397</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46360" target="_blank" rel="noopener noreferrer">#46360</a> (<a href="https://github.com/genzgd" target="_blank" rel="noopener noreferrer">Geoff Genz</a>).</li><li>Add new function <code>regexpExtract</code>, like Spark function <code>REGEXP_EXTRACT</code> for compatibility. It is similar to the existing function <code>extract</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46469" target="_blank" rel="noopener noreferrer">#46469</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Add new function <code>JSONArrayLength</code>, which returns the number of elements in the outermost JSON array. The function returns NULL if the input JSON string is invalid. <a href="https://github.com/ClickHouse/ClickHouse/pull/46631" target="_blank" rel="noopener noreferrer">#46631</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-improvement">Performance Improvement<a href="#performance-improvement" class="hash-link" aria-label="Direct link to Performance Improvement" title="Direct link to Performance Improvement">​</a></h4><ul><li>The introduced logic works if a PREWHERE condition is a conjunction of multiple conditions (cond1 AND cond2 AND ... ). It groups those conditions that require reading the same columns into steps. After each step, the corresponding part of the full condition is computed and the result rows might be filtered. This allows reading fewer rows in the next steps thus saving IO bandwidth and doing less computation. This logic is disabled by default for now. It will be enabled by default in one of the future releases once it is known to not have any regressions, so it is highly encouraged to be used for testing. It can be controlled by 2 settings: &quot;enable_multiple_prewhere_read_steps&quot; and &quot;move_all_conditions_to_prewhere&quot;. <a href="https://github.com/ClickHouse/ClickHouse/pull/46140" target="_blank" rel="noopener noreferrer">#46140</a> (<a href="https://github.com/davenger" target="_blank" rel="noopener noreferrer">Alexander Gololobov</a>).</li><li>An option added to aggregate partitions independently if table partition key and group by key are compatible. Controlled by the setting <code>allow_aggregate_partitions_independently</code>. Disabled by default because of limited applicability (please refer to the docs). <a href="https://github.com/ClickHouse/ClickHouse/pull/45364" target="_blank" rel="noopener noreferrer">#45364</a> (<a href="https://github.com/nickitat" target="_blank" rel="noopener noreferrer">Nikita Taranov</a>).</li><li>Allow using Vertical merge algorithm with parts in Compact format. This will allow ClickHouse server to use much less memory for background operations. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/46084" target="_blank" rel="noopener noreferrer">#46084</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45681" target="_blank" rel="noopener noreferrer">#45681</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/46282" target="_blank" rel="noopener noreferrer">#46282</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Optimize <code>Parquet</code> reader by using batch reader. <a href="https://github.com/ClickHouse/ClickHouse/pull/45878" target="_blank" rel="noopener noreferrer">#45878</a> (<a href="https://github.com/liuneng1994" target="_blank" rel="noopener noreferrer">LiuNeng</a>).</li><li>Add new <code>local_filesystem_read_method</code> method <code>io_uring</code> based on the asynchronous Linux <a href="https://kernel.dk/io_uring.pdf" target="_blank" rel="noopener noreferrer">io_uring</a> subsystem, improving read performance almost universally compared to the default <code>pread</code> method. <a href="https://github.com/ClickHouse/ClickHouse/pull/38456" target="_blank" rel="noopener noreferrer">#38456</a> (<a href="https://github.com/sauliusvl" target="_blank" rel="noopener noreferrer">Saulius Valatka</a>).</li><li>Rewrite aggregate functions with <code>if</code> expression as argument when logically equivalent. For example, <code>avg(if(cond, col, null))</code> can be rewritten to avgIf(cond, col). It is helpful in performance. <a href="https://github.com/ClickHouse/ClickHouse/pull/44730" target="_blank" rel="noopener noreferrer">#44730</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Improve lower/upper function performance with avx512 instructions. <a href="https://github.com/ClickHouse/ClickHouse/pull/37894" target="_blank" rel="noopener noreferrer">#37894</a> (<a href="https://github.com/yaqi-zhao" target="_blank" rel="noopener noreferrer">yaqi-zhao</a>).</li><li>Remove the limitation that on systems with &gt;=32 cores and SMT disabled ClickHouse uses only half of the cores (the case when you disable Hyper Threading in BIOS). <a href="https://github.com/ClickHouse/ClickHouse/pull/44973" target="_blank" rel="noopener noreferrer">#44973</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Improve performance of function <code>multiIf</code> by columnar executing, speed up by 2.3x. <a href="https://github.com/ClickHouse/ClickHouse/pull/45296" target="_blank" rel="noopener noreferrer">#45296</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Add fast path for function <code>position</code> when the needle is empty. <a href="https://github.com/ClickHouse/ClickHouse/pull/45382" target="_blank" rel="noopener noreferrer">#45382</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Enable <code>query_plan_remove_redundant_sorting</code> optimization by default. Optimization implemented in <a href="https://github.com/ClickHouse/ClickHouse/issues/45420" target="_blank" rel="noopener noreferrer">#45420</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45567" target="_blank" rel="noopener noreferrer">#45567</a> (<a href="https://github.com/devcrafter" target="_blank" rel="noopener noreferrer">Igor Nikonov</a>).</li><li>Increased HTTP Transfer Encoding chunk size to improve performance of large queries using the HTTP interface. <a href="https://github.com/ClickHouse/ClickHouse/pull/45593" target="_blank" rel="noopener noreferrer">#45593</a> (<a href="https://github.com/genzgd" target="_blank" rel="noopener noreferrer">Geoff Genz</a>).</li><li>Fixed performance of short <code>SELECT</code> queries that read from tables with a large number of <code>Array</code>/<code>Map</code>/<code>Nested</code> columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/45630" target="_blank" rel="noopener noreferrer">#45630</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Improve performance of filtering for big integers and decimal types. <a href="https://github.com/ClickHouse/ClickHouse/pull/45949" target="_blank" rel="noopener noreferrer">#45949</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>This change could effectively reduce the overhead of obtaining the filter from ColumnNullable(UInt8) and improve the overall query performance. To evaluate the impact of this change, we adopted TPC-H benchmark but revised the column types from non-nullable to nullable, and we measured the QPS of its queries as the performance indicator. <a href="https://github.com/ClickHouse/ClickHouse/pull/45962" target="_blank" rel="noopener noreferrer">#45962</a> (<a href="https://github.com/ZhiguoZh" target="_blank" rel="noopener noreferrer">Zhiguo Zhou</a>).</li><li>Make the <code>_part</code> and <code>_partition_id</code> virtual column be <code>LowCardinality(String)</code> type. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45964" target="_blank" rel="noopener noreferrer">#45964</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45975" target="_blank" rel="noopener noreferrer">#45975</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Improve the performance of Decimal conversion when the scale does not change. <a href="https://github.com/ClickHouse/ClickHouse/pull/46095" target="_blank" rel="noopener noreferrer">#46095</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Allow increased prefetching for read data. <a href="https://github.com/ClickHouse/ClickHouse/pull/46168" target="_blank" rel="noopener noreferrer">#46168</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Rewrite <code>arrayExists(x -&gt; x = 1, arr)</code> -&gt; <code>has(arr, 1)</code>, which improve performance by 1.34x. <a href="https://github.com/ClickHouse/ClickHouse/pull/46188" target="_blank" rel="noopener noreferrer">#46188</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Fix too big memory usage for vertical merges on non-remote disk. Respect <code>max_insert_delayed_streams_for_parallel_write</code> for the remote disk. <a href="https://github.com/ClickHouse/ClickHouse/pull/46275" target="_blank" rel="noopener noreferrer">#46275</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Update zstd to v1.5.4. It has some minor improvements in performance and compression ratio. If you run replicas with different versions of ClickHouse you may see reasonable error messages <code>Data after merge/mutation is not byte-identical to data on another replicas.</code> with explanation. These messages are Ok and you should not worry. <a href="https://github.com/ClickHouse/ClickHouse/pull/46280" target="_blank" rel="noopener noreferrer">#46280</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Fix performance degradation caused by <a href="https://github.com/ClickHouse/ClickHouse/issues/39737" target="_blank" rel="noopener noreferrer">#39737</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46309" target="_blank" rel="noopener noreferrer">#46309</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>The <code>replicas_status</code> handle will answer quickly even in case of a large replication queue. <a href="https://github.com/ClickHouse/ClickHouse/pull/46310" target="_blank" rel="noopener noreferrer">#46310</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Add avx512 support for aggregate function <code>sum</code>, function unary arithmetic, function comparison. <a href="https://github.com/ClickHouse/ClickHouse/pull/37870" target="_blank" rel="noopener noreferrer">#37870</a> (<a href="https://github.com/zzachimed" target="_blank" rel="noopener noreferrer">zhao zhou</a>).</li><li>Rewrote the code around marks distribution and the overall coordination of the reading in order to achieve the maximum performance improvement. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/34527" target="_blank" rel="noopener noreferrer">#34527</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43772" target="_blank" rel="noopener noreferrer">#43772</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>).</li><li>Remove redundant DISTINCT clauses in query (subqueries). Implemented on top of query plan. It does similar optimization as <code>optimize_duplicate_order_by_and_distinct</code> regarding DISTINCT clauses. Can be enabled via <code>query_plan_remove_redundant_distinct</code> setting. Related to <a href="https://github.com/ClickHouse/ClickHouse/issues/42648" target="_blank" rel="noopener noreferrer">#42648</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44176" target="_blank" rel="noopener noreferrer">#44176</a> (<a href="https://github.com/devcrafter" target="_blank" rel="noopener noreferrer">Igor Nikonov</a>).</li><li>A few query rewrite optimizations: <code>sumIf(123, cond) -&gt; 123 * countIf(1, cond)</code>, <code>sum(if(cond, 123, 0)) -&gt; 123 * countIf(cond)</code>, <code>sum(if(cond, 0, 123)) -&gt; 123 * countIf(not(cond))</code> <a href="https://github.com/ClickHouse/ClickHouse/pull/44728" target="_blank" rel="noopener noreferrer">#44728</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Improved how memory bound merging and aggregation in order on top query plan interact. Previously we fell back to explicit sorting for AIO in some cases when it wasn&#x27;t actually needed. <a href="https://github.com/ClickHouse/ClickHouse/pull/45892" target="_blank" rel="noopener noreferrer">#45892</a> (<a href="https://github.com/nickitat" target="_blank" rel="noopener noreferrer">Nikita Taranov</a>).</li><li>Concurrent merges are scheduled using round-robin by default to ensure fair and starvation-free operation. Previously in heavily overloaded shards, big merges could possibly be starved by smaller merges due to the use of strict priority scheduling. Added <code>background_merges_mutations_scheduling_policy</code> server config option to select scheduling algorithm (<code>round_robin</code> or <code>shortest_task_first</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/46247" target="_blank" rel="noopener noreferrer">#46247</a> (<a href="https://github.com/serxa" target="_blank" rel="noopener noreferrer">Sergei Trifonov</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improvement">Improvement<a href="#improvement" class="hash-link" aria-label="Direct link to Improvement" title="Direct link to Improvement">​</a></h4><ul><li>Enable retries for INSERT by default in case of ZooKeeper session loss. We already use it in production. <a href="https://github.com/ClickHouse/ClickHouse/pull/46308" target="_blank" rel="noopener noreferrer">#46308</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Add ability to ignore unknown keys in JSON object for named tuples (<code>input_format_json_ignore_unknown_keys_in_named_tuple</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/45678" target="_blank" rel="noopener noreferrer">#45678</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Support optimizing the <code>where</code> clause with sorting key expression move to <code>prewhere</code>  for query with <code>final</code>. <a href="https://github.com/ClickHouse/ClickHouse/issues/38893" target="_blank" rel="noopener noreferrer">#38893</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/38950" target="_blank" rel="noopener noreferrer">#38950</a> (<a href="https://github.com/hexiaoting" target="_blank" rel="noopener noreferrer">hexiaoting</a>).</li><li>Add new metrics for backups: num_processed_files and processed_files_size described actual number of processed files. <a href="https://github.com/ClickHouse/ClickHouse/pull/42244" target="_blank" rel="noopener noreferrer">#42244</a> (<a href="https://github.com/AVMusorin" target="_blank" rel="noopener noreferrer">Aleksandr</a>).</li><li>Added retries on interserver DNS errors. <a href="https://github.com/ClickHouse/ClickHouse/pull/43179" target="_blank" rel="noopener noreferrer">#43179</a> (<a href="https://github.com/tonickkozlov" target="_blank" rel="noopener noreferrer">Anton Kozlov</a>).</li><li>Keeper improvement: try preallocating space on the disk to avoid undefined out-of-space issues. Introduce setting <code>max_log_file_size</code> for the maximum size of Keeper&#x27;s Raft log files. <a href="https://github.com/ClickHouse/ClickHouse/pull/44370" target="_blank" rel="noopener noreferrer">#44370</a> (<a href="https://github.com/antonio2368" target="_blank" rel="noopener noreferrer">Antonio Andelic</a>).</li><li>Optimize behavior for a replica delay api logic in case the replica is read-only. <a href="https://github.com/ClickHouse/ClickHouse/pull/45148" target="_blank" rel="noopener noreferrer">#45148</a> (<a href="https://github.com/mateng0915" target="_blank" rel="noopener noreferrer">mateng915</a>).</li><li>Ask for the password in clickhouse-client interactively in a case when the empty password is wrong. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/46702" target="_blank" rel="noopener noreferrer">#46702</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46730" target="_blank" rel="noopener noreferrer">#46730</a> (<a href="https://github.com/evillique" target="_blank" rel="noopener noreferrer">Nikolay Degterinsky</a>). </li><li>Mark <code>Gorilla</code> compression on columns of non-Float* type as suspicious. <a href="https://github.com/ClickHouse/ClickHouse/pull/45376" target="_blank" rel="noopener noreferrer">#45376</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Show replica name that is executing a merge in the <code>postpone_reason</code> column. <a href="https://github.com/ClickHouse/ClickHouse/pull/45458" target="_blank" rel="noopener noreferrer">#45458</a> (<a href="https://github.com/FrankChen021" target="_blank" rel="noopener noreferrer">Frank Chen</a>).</li><li>Save exception stack trace in part_log. <a href="https://github.com/ClickHouse/ClickHouse/pull/45459" target="_blank" rel="noopener noreferrer">#45459</a> (<a href="https://github.com/FrankChen021" target="_blank" rel="noopener noreferrer">Frank Chen</a>).</li><li>The <code>regexp_tree</code> dictionary is polished and now it is compatible with <a href="https://github.com/ua-parser/uap-core" target="_blank" rel="noopener noreferrer">https://github.com/ua-parser/uap-core</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45631" target="_blank" rel="noopener noreferrer">#45631</a> (<a href="https://github.com/hanfei1991" target="_blank" rel="noopener noreferrer">Han Fei</a>).</li><li>Updated checking of <code>SYSTEM SYNC REPLICA</code>, resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/45508" target="_blank" rel="noopener noreferrer">#45508</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/45648" target="_blank" rel="noopener noreferrer">#45648</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>Rename setting <code>replication_alter_partitions_sync</code> to <code>alter_sync</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45659" target="_blank" rel="noopener noreferrer">#45659</a> (<a href="https://github.com/antonio2368" target="_blank" rel="noopener noreferrer">Antonio Andelic</a>).</li><li>The <code>generateRandom</code> table function and the engine now support <code>LowCardinality</code> data types. This is useful for testing, for example you can write <code>INSERT INTO table SELECT * FROM generateRandom() LIMIT 1000</code>. This is needed to debug <a href="https://github.com/ClickHouse/ClickHouse/issues/45590" target="_blank" rel="noopener noreferrer">#45590</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45661" target="_blank" rel="noopener noreferrer">#45661</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>The experimental query result cache now provides more modular configuration settings. <a href="https://github.com/ClickHouse/ClickHouse/pull/45679" target="_blank" rel="noopener noreferrer">#45679</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Renamed &quot;query result cache&quot; to &quot;query cache&quot;. <a href="https://github.com/ClickHouse/ClickHouse/pull/45682" target="_blank" rel="noopener noreferrer">#45682</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>add <code>SYSTEM SYNC FILE CACHE</code> command. It will do the <code>sync</code> syscall. <a href="https://github.com/ClickHouse/ClickHouse/issues/8921" target="_blank" rel="noopener noreferrer">#8921</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45685" target="_blank" rel="noopener noreferrer">#45685</a> (<a href="https://github.com/freedomDR" target="_blank" rel="noopener noreferrer">DR</a>).</li><li>Add a new S3 setting <code>allow_head_object_request</code>. This PR makes usage of <code>GetObjectAttributes</code> request instead of <code>HeadObject</code> introduced in <a href="https://github.com/ClickHouse/ClickHouse/pull/45288" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse/ClickHouse/pull/45288</a> optional (and disabled by default). <a href="https://github.com/ClickHouse/ClickHouse/pull/45701" target="_blank" rel="noopener noreferrer">#45701</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>).</li><li>Add ability to override connection settings based on connection names (that said that now you can forget about storing password for each connection, you can simply put everything into <code>~/.clickhouse-client/config.xml</code> and even use different history files for them, which can be also useful). <a href="https://github.com/ClickHouse/ClickHouse/pull/45715" target="_blank" rel="noopener noreferrer">#45715</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Arrow format: support the duration type. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45669" target="_blank" rel="noopener noreferrer">#45669</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45750" target="_blank" rel="noopener noreferrer">#45750</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Extend the logging in the Query Cache to improve investigations of the caching behavior. <a href="https://github.com/ClickHouse/ClickHouse/pull/45751" target="_blank" rel="noopener noreferrer">#45751</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>The query cache&#x27;s server-level settings are now reconfigurable at runtime. <a href="https://github.com/ClickHouse/ClickHouse/pull/45758" target="_blank" rel="noopener noreferrer">#45758</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Hide password in logs when a table function&#x27;s arguments are specified with a named collection. <a href="https://github.com/ClickHouse/ClickHouse/pull/45774" target="_blank" rel="noopener noreferrer">#45774</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>).</li><li>Improve internal S3 client to correctly deduce regions and redirections for different types of URLs. <a href="https://github.com/ClickHouse/ClickHouse/pull/45783" target="_blank" rel="noopener noreferrer">#45783</a> (<a href="https://github.com/antonio2368" target="_blank" rel="noopener noreferrer">Antonio Andelic</a>).</li><li>Add support for Map, IPv4 and IPv6 types in generateRandom. Mostly useful for testing. <a href="https://github.com/ClickHouse/ClickHouse/pull/45785" target="_blank" rel="noopener noreferrer">#45785</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Support empty/notEmpty for IP types. <a href="https://github.com/ClickHouse/ClickHouse/pull/45799" target="_blank" rel="noopener noreferrer">#45799</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>The column <code>num_processed_files</code> was split into two columns: <code>num_files</code> (for BACKUP) and <code>files_read</code> (for RESTORE). The column <code>processed_files_size</code> was split into two columns: <code>total_size</code> (for BACKUP) and <code>bytes_read</code> (for RESTORE). <a href="https://github.com/ClickHouse/ClickHouse/pull/45800" target="_blank" rel="noopener noreferrer">#45800</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>).</li><li>Add support for <code>SHOW ENGINES</code> query for MySQL compatibility. <a href="https://github.com/ClickHouse/ClickHouse/pull/45859" target="_blank" rel="noopener noreferrer">#45859</a> (<a href="https://github.com/FArthur-cmd" target="_blank" rel="noopener noreferrer">Filatenkov Artur</a>).</li><li>Improved how the obfuscator deals with queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/45867" target="_blank" rel="noopener noreferrer">#45867</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Improve behaviour of conversion into Date for boundary value 65535 (2149-06-06). <a href="https://github.com/ClickHouse/ClickHouse/pull/46042" target="_blank" rel="noopener noreferrer">#46042</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/45914" target="_blank" rel="noopener noreferrer">#45914</a> (<a href="https://github.com/jh0x" target="_blank" rel="noopener noreferrer">Joanna Hulboj</a>).</li><li>Add setting <code>check_referential_table_dependencies</code> to check referential dependencies on <code>DROP TABLE</code>. This PR solves <a href="https://github.com/ClickHouse/ClickHouse/issues/38326" target="_blank" rel="noopener noreferrer">#38326</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45936" target="_blank" rel="noopener noreferrer">#45936</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>).</li><li>Fix <code>tupleElement</code> to return <code>Null</code> when having <code>Null</code> argument. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45894" target="_blank" rel="noopener noreferrer">#45894</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45952" target="_blank" rel="noopener noreferrer">#45952</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Throw an error on no files satisfying the S3 wildcard. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45587" target="_blank" rel="noopener noreferrer">#45587</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45957" target="_blank" rel="noopener noreferrer">#45957</a> (<a href="https://github.com/xiedeyantu" target="_blank" rel="noopener noreferrer">chen</a>).</li><li>Use cluster state data to check concurrent backup/restore. <a href="https://github.com/ClickHouse/ClickHouse/pull/45982" target="_blank" rel="noopener noreferrer">#45982</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>ClickHouse Client: Use &quot;exact&quot; matching for fuzzy search, which has correct case ignorance and more appropriate algorithm for matching SQL queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/46000" target="_blank" rel="noopener noreferrer">#46000</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Forbid wrong create View syntax <code>CREATE View X TO Y AS SELECT</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/4331" target="_blank" rel="noopener noreferrer">#4331</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46043" target="_blank" rel="noopener noreferrer">#46043</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Storage <code>Log</code> family support setting the <code>storage_policy</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/43421" target="_blank" rel="noopener noreferrer">#43421</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46044" target="_blank" rel="noopener noreferrer">#46044</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Improve <code>JSONColumns</code> format when the result is empty. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/46024" target="_blank" rel="noopener noreferrer">#46024</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46053" target="_blank" rel="noopener noreferrer">#46053</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Add reference implementation for SipHash128. <a href="https://github.com/ClickHouse/ClickHouse/pull/46065" target="_blank" rel="noopener noreferrer">#46065</a> (<a href="https://github.com/aiven-sal" target="_blank" rel="noopener noreferrer">Salvatore Mesoraca</a>).</li><li>Add a new metric to record allocations times and bytes using mmap. <a href="https://github.com/ClickHouse/ClickHouse/pull/46068" target="_blank" rel="noopener noreferrer">#46068</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Currently for functions like <code>leftPad</code>, <code>rightPad</code>, <code>leftPadUTF8</code>, <code>rightPadUTF8</code>, the second argument <code>length</code> must be UInt8|16|32|64|128|256. Which is too strict for clickhouse users, besides, it is not consistent with other similar functions like <code>arrayResize</code>, <code>substring</code> and so on. <a href="https://github.com/ClickHouse/ClickHouse/pull/46103" target="_blank" rel="noopener noreferrer">#46103</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Fix assertion in the <code>welchTTest</code> function in debug build when the resulting statistics is NaN. Unified the behavior with other similar functions. Change the behavior of <code>studentTTest</code> to return NaN instead of throwing an exception because the previous behavior was inconvenient. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/41176" target="_blank" rel="noopener noreferrer">#41176</a> This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/42162" target="_blank" rel="noopener noreferrer">#42162</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46141" target="_blank" rel="noopener noreferrer">#46141</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>More convenient usage of big integers and ORDER BY WITH FILL. Allow using plain integers for start and end points in WITH FILL when ORDER BY big (128-bit and 256-bit) integers. Fix the wrong result for big integers with negative start or end points. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/16733" target="_blank" rel="noopener noreferrer">#16733</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46152" target="_blank" rel="noopener noreferrer">#46152</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Add <code>parts</code>, <code>active_parts</code> and <code>total_marks</code> columns to <code>system.tables</code> on <a href="https://github.com/ClickHouse/ClickHouse/issues/44336" target="_blank" rel="noopener noreferrer">issue</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46161" target="_blank" rel="noopener noreferrer">#46161</a> (<a href="https://github.com/attack204" target="_blank" rel="noopener noreferrer">attack204</a>).</li><li>Functions &quot;multi<!-- -->[Fuzzy]<!-- -->Match(Any|AnyIndex|AllIndices}&quot; now reject regexes which will likely evaluate very slowly in vectorscan. <a href="https://github.com/ClickHouse/ClickHouse/pull/46167" target="_blank" rel="noopener noreferrer">#46167</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>When <code>insert_null_as_default</code> is enabled and column doesn&#x27;t have defined default value, the default of column type will be used. Also this PR fixes using default values on nulls in case of LowCardinality columns. <a href="https://github.com/ClickHouse/ClickHouse/pull/46171" target="_blank" rel="noopener noreferrer">#46171</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Prefer explicitly defined access keys for S3 clients. If <code>use_environment_credentials</code> is set to <code>true</code>, and the user has provided the access key through query or config, they will be used instead of the ones from the environment variable. <a href="https://github.com/ClickHouse/ClickHouse/pull/46191" target="_blank" rel="noopener noreferrer">#46191</a> (<a href="https://github.com/antonio2368" target="_blank" rel="noopener noreferrer">Antonio Andelic</a>).</li><li>Add an alias &quot;DATE_FORMAT()&quot; for function &quot;formatDateTime()&quot; to improve compatibility with MySQL&#x27;s SQL dialect, extend function <code>formatDateTime</code> with substitutions &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;h&quot;, &quot;i&quot;, &quot;k&quot;, &quot;l&quot; &quot;r&quot;, &quot;s&quot;, &quot;W&quot;. ### Documentation entry for user-facing changes User-readable short description: <code>DATE_FORMAT</code> is an alias of <code>formatDateTime</code>. Formats a Time according to the given Format string. Format is a constant expression, so you cannot have multiple formats for a single result column. (Provide link to <a href="https://clickhouse.com/docs/en/sql-reference/functions/date-time-functions/#formatdatetime" target="_blank" rel="noopener noreferrer">formatDateTime</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/46302" target="_blank" rel="noopener noreferrer">#46302</a> (<a href="https://github.com/JakeBamrah" target="_blank" rel="noopener noreferrer">Jake Bamrah</a>).</li><li>Add <code>ProfileEvents</code> and <code>CurrentMetrics</code> about the callback tasks for parallel replicas (<code>s3Cluster</code> and <code>MergeTree</code> tables). <a href="https://github.com/ClickHouse/ClickHouse/pull/46313" target="_blank" rel="noopener noreferrer">#46313</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Add support for <code>DELETE</code> and <code>UPDATE</code> for tables using <code>KeeperMap</code> storage engine. <a href="https://github.com/ClickHouse/ClickHouse/pull/46330" target="_blank" rel="noopener noreferrer">#46330</a> (<a href="https://github.com/antonio2368" target="_blank" rel="noopener noreferrer">Antonio Andelic</a>).</li><li>Allow writing RENAME queries with query parameters. Resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/45778" target="_blank" rel="noopener noreferrer">#45778</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46407" target="_blank" rel="noopener noreferrer">#46407</a> (<a href="https://github.com/evillique" target="_blank" rel="noopener noreferrer">Nikolay Degterinsky</a>).</li><li>Fix parameterized SELECT queries with REPLACE transformer. Resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/33002" target="_blank" rel="noopener noreferrer">#33002</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46420" target="_blank" rel="noopener noreferrer">#46420</a> (<a href="https://github.com/evillique" target="_blank" rel="noopener noreferrer">Nikolay Degterinsky</a>).</li><li>Exclude the internal database used for temporary/external tables from the calculation of asynchronous metric &quot;NumberOfDatabases&quot;. This makes the behavior consistent with system table &quot;system.databases&quot;. <a href="https://github.com/ClickHouse/ClickHouse/pull/46435" target="_blank" rel="noopener noreferrer">#46435</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Added <code>last_exception_time</code> column into distribution_queue table. <a href="https://github.com/ClickHouse/ClickHouse/pull/46564" target="_blank" rel="noopener noreferrer">#46564</a> (<a href="https://github.com/AVMusorin" target="_blank" rel="noopener noreferrer">Aleksandr</a>).</li><li>Support for IN clause with parameter in parameterized views. <a href="https://github.com/ClickHouse/ClickHouse/pull/46583" target="_blank" rel="noopener noreferrer">#46583</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>Do not load named collections on server startup (load them on first access instead). <a href="https://github.com/ClickHouse/ClickHouse/pull/46607" target="_blank" rel="noopener noreferrer">#46607</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="buildtestingpackaging-improvement">Build/Testing/Packaging Improvement<a href="#buildtestingpackaging-improvement" class="hash-link" aria-label="Direct link to Build/Testing/Packaging Improvement" title="Direct link to Build/Testing/Packaging Improvement">​</a></h4><ul><li>Introduce GWP-ASan implemented by the LLVM runtime. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/27039" target="_blank" rel="noopener noreferrer">#27039</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45226" target="_blank" rel="noopener noreferrer">#45226</a> (<a href="https://github.com/hanfei1991" target="_blank" rel="noopener noreferrer">Han Fei</a>).</li><li>We want to make our tests less stable and more flaky: add randomization for merge tree settings in tests. <a href="https://github.com/ClickHouse/ClickHouse/pull/38983" target="_blank" rel="noopener noreferrer">#38983</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Enable the HDFS support in PowerPC and which helps to fixes the following functional tests 02113_hdfs_assert.sh, 02244_hdfs_cluster.sql and 02368_cancel_write_into_hdfs.sh. <a href="https://github.com/ClickHouse/ClickHouse/pull/44949" target="_blank" rel="noopener noreferrer">#44949</a> (<a href="https://github.com/MeenaRenganathan22" target="_blank" rel="noopener noreferrer">MeenaRenganathan22</a>).</li><li>Add systemd.service file for clickhouse-keeper. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44293" target="_blank" rel="noopener noreferrer">#44293</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45568" target="_blank" rel="noopener noreferrer">#45568</a> (<a href="https://github.com/Felixoid" target="_blank" rel="noopener noreferrer">Mikhail f. Shiryaev</a>).</li><li>ClickHouse&#x27;s fork of poco was moved from &quot;contrib/&quot; to &quot;base/poco/&quot;. <a href="https://github.com/ClickHouse/ClickHouse/pull/46075" target="_blank" rel="noopener noreferrer">#46075</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Add an option for <code>clickhouse-watchdog</code> to restart the child process. This does not make a lot of use. <a href="https://github.com/ClickHouse/ClickHouse/pull/46312" target="_blank" rel="noopener noreferrer">#46312</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>If the environment variable <code>CLICKHOUSE_DOCKER_RESTART_ON_EXIT</code> is set to 1, the Docker container will run <code>clickhouse-server</code> as a child instead of the first process, and restart it when it exited. <a href="https://github.com/ClickHouse/ClickHouse/pull/46391" target="_blank" rel="noopener noreferrer">#46391</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Fix Systemd service file. <a href="https://github.com/ClickHouse/ClickHouse/pull/46461" target="_blank" rel="noopener noreferrer">#46461</a> (<a href="https://github.com/cmsxbc" target="_blank" rel="noopener noreferrer">SuperDJY</a>).</li><li>Raised the minimum Clang version needed to build ClickHouse from 12 to 15. <a href="https://github.com/ClickHouse/ClickHouse/pull/46710" target="_blank" rel="noopener noreferrer">#46710</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Upgrade Intel QPL from v0.3.0 to v1.0.0 2. Build libaccel-config and link it statically to QPL library instead of dynamically. <a href="https://github.com/ClickHouse/ClickHouse/pull/45809" target="_blank" rel="noopener noreferrer">#45809</a> (<a href="https://github.com/jinjunzh" target="_blank" rel="noopener noreferrer">jasperzhu</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fix-user-visible-misbehavior-in-official-stable-or-prestable-release">Bug Fix (user-visible misbehavior in official stable or prestable release)<a href="#bug-fix-user-visible-misbehavior-in-official-stable-or-prestable-release" class="hash-link" aria-label="Direct link to Bug Fix (user-visible misbehavior in official stable or prestable release)" title="Direct link to Bug Fix (user-visible misbehavior in official stable or prestable release)">​</a></h4><ul><li>Flush data exactly by <code>rabbitmq_flush_interval_ms</code> or by <code>rabbitmq_max_block_size</code> in <code>StorageRabbitMQ</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/42389" target="_blank" rel="noopener noreferrer">#42389</a>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45160" target="_blank" rel="noopener noreferrer">#45160</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44404" target="_blank" rel="noopener noreferrer">#44404</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Use PODArray to render in sparkBar function, so we can control the memory usage. Close <a href="https://github.com/ClickHouse/ClickHouse/issues/44467" target="_blank" rel="noopener noreferrer">#44467</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44489" target="_blank" rel="noopener noreferrer">#44489</a> (<a href="https://github.com/canhld94" target="_blank" rel="noopener noreferrer">Duc Canh Le</a>).</li><li>Fix functions (quantilesExactExclusive, quantilesExactInclusive) return unsorted array element. <a href="https://github.com/ClickHouse/ClickHouse/pull/45379" target="_blank" rel="noopener noreferrer">#45379</a> (<a href="https://github.com/wujunfu" target="_blank" rel="noopener noreferrer">wujunfu</a>).</li><li>Fix uncaught exception in HTTPHandler when open telemetry is enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/45456" target="_blank" rel="noopener noreferrer">#45456</a> (<a href="https://github.com/FrankChen021" target="_blank" rel="noopener noreferrer">Frank Chen</a>).</li><li>Don&#x27;t infer Dates from 8 digit numbers. It could lead to wrong data to be read. <a href="https://github.com/ClickHouse/ClickHouse/pull/45581" target="_blank" rel="noopener noreferrer">#45581</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fixes to correctly use <code>odbc_bridge_use_connection_pooling</code> setting. <a href="https://github.com/ClickHouse/ClickHouse/pull/45591" target="_blank" rel="noopener noreferrer">#45591</a> (<a href="https://github.com/bharatnc" target="_blank" rel="noopener noreferrer">Bharat Nallan</a>).</li><li>When the callback in the cache is called, it is possible that this cache is destructed. To keep it safe, we capture members by value. It&#x27;s also safe for task schedule because it will be deactivated before storage is destroyed. Resolve <a href="https://github.com/ClickHouse/ClickHouse/issues/45548" target="_blank" rel="noopener noreferrer">#45548</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45601" target="_blank" rel="noopener noreferrer">#45601</a> (<a href="https://github.com/hanfei1991" target="_blank" rel="noopener noreferrer">Han Fei</a>).</li><li>Fix data corruption when codecs Delta or DoubleDelta are combined with codec Gorilla. <a href="https://github.com/ClickHouse/ClickHouse/pull/45615" target="_blank" rel="noopener noreferrer">#45615</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Correctly check types when using N-gram bloom filter index to avoid invalid reads. <a href="https://github.com/ClickHouse/ClickHouse/pull/45617" target="_blank" rel="noopener noreferrer">#45617</a> (<a href="https://github.com/antonio2368" target="_blank" rel="noopener noreferrer">Antonio Andelic</a>).</li><li>A couple of segfaults have been reported around <code>c-ares</code>. They were introduced in my previous pull requests. I have fixed them with the help of Alexander Tokmakov. <a href="https://github.com/ClickHouse/ClickHouse/pull/45629" target="_blank" rel="noopener noreferrer">#45629</a> (<a href="https://github.com/arthurpassos" target="_blank" rel="noopener noreferrer">Arthur Passos</a>).</li><li>Fix key description when encountering duplicate primary keys. This can happen in projections. See <a href="https://github.com/ClickHouse/ClickHouse/issues/45590" target="_blank" rel="noopener noreferrer">#45590</a> for details. <a href="https://github.com/ClickHouse/ClickHouse/pull/45686" target="_blank" rel="noopener noreferrer">#45686</a> (<a href="https://github.com/amosbird" target="_blank" rel="noopener noreferrer">Amos Bird</a>).</li><li>Set compression method and level for backup Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45690" target="_blank" rel="noopener noreferrer">#45690</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45737" target="_blank" rel="noopener noreferrer">#45737</a> (<a href="https://github.com/chhetripradeep" target="_blank" rel="noopener noreferrer">Pradeep Chhetri</a>).</li><li>Should use <code>select_query_typed.limitByOffset()</code> instead of <code>select_query_typed.limitOffset()</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45817" target="_blank" rel="noopener noreferrer">#45817</a> (<a href="https://github.com/taofengliu" target="_blank" rel="noopener noreferrer">刘陶峰</a>).</li><li>When use experimental analyzer, queries like <code>SELECT number FROM numbers(100) LIMIT 10 OFFSET 10;</code> get wrong results (empty result for this sql). That is caused by an unnecessary offset step added by planner. <a href="https://github.com/ClickHouse/ClickHouse/pull/45822" target="_blank" rel="noopener noreferrer">#45822</a> (<a href="https://github.com/taofengliu" target="_blank" rel="noopener noreferrer">刘陶峰</a>).</li><li>Backward compatibility - allow implicit narrowing conversion from UInt64 to IPv4 - required for &quot;INSERT ... VALUES ...&quot; expression. <a href="https://github.com/ClickHouse/ClickHouse/pull/45865" target="_blank" rel="noopener noreferrer">#45865</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>Bugfix IPv6 parser for mixed ip4 address with missed first octet (like <code>::.1.2.3</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/45871" target="_blank" rel="noopener noreferrer">#45871</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>Add the <code>query_kind</code> column to the <code>system.processes</code> table and the <code>SHOW PROCESSLIST</code> query. Remove duplicate code. It fixes a bug: the global configuration parameter <code>max_concurrent_select_queries</code> was not respected to queries with <code>INTERSECT</code> or <code>EXCEPT</code> chains. <a href="https://github.com/ClickHouse/ClickHouse/pull/45872" target="_blank" rel="noopener noreferrer">#45872</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Fix crash in a function <code>stochasticLinearRegression</code>. Found by WingFuzz. <a href="https://github.com/ClickHouse/ClickHouse/pull/45985" target="_blank" rel="noopener noreferrer">#45985</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Fix crash in <code>SELECT</code> queries with <code>INTERSECT</code> and <code>EXCEPT</code> modifiers that read data from tables with enabled sparse columns (controlled by setting <code>ratio_of_defaults_for_sparse_serialization</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/45987" target="_blank" rel="noopener noreferrer">#45987</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Fix read in order optimization for DESC sorting with FINAL, close <a href="https://github.com/ClickHouse/ClickHouse/issues/45815" target="_blank" rel="noopener noreferrer">#45815</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46009" target="_blank" rel="noopener noreferrer">#46009</a> (<a href="https://github.com/vdimir" target="_blank" rel="noopener noreferrer">Vladimir C</a>).</li><li>Fix reading of non existing nested columns with multiple level in compact parts. <a href="https://github.com/ClickHouse/ClickHouse/pull/46045" target="_blank" rel="noopener noreferrer">#46045</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Fix elapsed column in system.processes (10x error). <a href="https://github.com/ClickHouse/ClickHouse/pull/46047" target="_blank" rel="noopener noreferrer">#46047</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Follow-up fix for Replace domain IP types (IPv4, IPv6) with native <a href="https://github.com/ClickHouse/ClickHouse/pull/43221" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse/ClickHouse/pull/43221</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46087" target="_blank" rel="noopener noreferrer">#46087</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>Fix environment variable substitution in the configuration when a parameter already has a value. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/46131" target="_blank" rel="noopener noreferrer">#46131</a>. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/9547" target="_blank" rel="noopener noreferrer">#9547</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46144" target="_blank" rel="noopener noreferrer">#46144</a> (<a href="https://github.com/pufit" target="_blank" rel="noopener noreferrer">pufit</a>).</li><li>Fix incorrect predicate push down with grouping sets. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45947" target="_blank" rel="noopener noreferrer">#45947</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46151" target="_blank" rel="noopener noreferrer">#46151</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Fix possible pipeline stuck error on <code>fulls_sorting_join</code> with constant keys. <a href="https://github.com/ClickHouse/ClickHouse/pull/46175" target="_blank" rel="noopener noreferrer">#46175</a> (<a href="https://github.com/vdimir" target="_blank" rel="noopener noreferrer">Vladimir C</a>).</li><li>Never rewrite tuple functions as literals during formatting to avoid incorrect results. <a href="https://github.com/ClickHouse/ClickHouse/pull/46232" target="_blank" rel="noopener noreferrer">#46232</a> (<a href="https://github.com/aiven-sal" target="_blank" rel="noopener noreferrer">Salvatore Mesoraca</a>).</li><li>Fix possible out of bounds error while reading LowCardinality(Nullable) in Arrow format. <a href="https://github.com/ClickHouse/ClickHouse/pull/46270" target="_blank" rel="noopener noreferrer">#46270</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix <code>SYSTEM UNFREEZE</code> queries failing with the exception <code>CANNOT_PARSE_INPUT_ASSERTION_FAILED</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46325" target="_blank" rel="noopener noreferrer">#46325</a> (<a href="https://github.com/aalexfvk" target="_blank" rel="noopener noreferrer">Aleksei Filatov</a>).</li><li>Fix possible crash which can be caused by an integer overflow while deserializing aggregating state of a function that stores HashTable. <a href="https://github.com/ClickHouse/ClickHouse/pull/46349" target="_blank" rel="noopener noreferrer">#46349</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Fix possible <code>LOGICAL_ERROR</code> in asynchronous inserts with invalid data sent in format <code>VALUES</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46350" target="_blank" rel="noopener noreferrer">#46350</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Fixed a LOGICAL_ERROR on an attempt to execute <code>ALTER ... MOVE PART ... TO TABLE</code>. This type of query was never actually supported. <a href="https://github.com/ClickHouse/ClickHouse/pull/46359" target="_blank" rel="noopener noreferrer">#46359</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">Alexander Tokmakov</a>).</li><li>Fix s3Cluster schema inference in parallel distributed insert select when <code>parallel_distributed_insert_select</code> is enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/46381" target="_blank" rel="noopener noreferrer">#46381</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix queries like <code>ALTER TABLE ... UPDATE nested.arr1 = nested.arr2 ...</code>, where <code>arr1</code> and <code>arr2</code> are fields of the same <code>Nested</code> column. <a href="https://github.com/ClickHouse/ClickHouse/pull/46387" target="_blank" rel="noopener noreferrer">#46387</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Scheduler may fail to schedule a task. If it happens, the whole MulityPartUpload should be aborted and <code>UploadHelper</code> must wait for already scheduled tasks. <a href="https://github.com/ClickHouse/ClickHouse/pull/46451" target="_blank" rel="noopener noreferrer">#46451</a> (<a href="https://github.com/novikd" target="_blank" rel="noopener noreferrer">Dmitry Novik</a>).</li><li>Fix PREWHERE for Merge with different default types (fixes some <code>NOT_FOUND_COLUMN_IN_BLOCK</code> when the default type for the column differs, also allow <code>PREWHERE</code> when the type of column is the same across tables, and prohibit it, only if it differs). <a href="https://github.com/ClickHouse/ClickHouse/pull/46454" target="_blank" rel="noopener noreferrer">#46454</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Fix a crash that could happen when constant values are used in <code>ORDER BY</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/46466" target="_blank" rel="noopener noreferrer">#46466</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46493" target="_blank" rel="noopener noreferrer">#46493</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Do not throw exception if <code>disk</code> setting was specified on query level, but <code>storage_policy</code> was specified in config merge tree settings section. <code>disk</code> will override setting from config. <a href="https://github.com/ClickHouse/ClickHouse/pull/46533" target="_blank" rel="noopener noreferrer">#46533</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Fix an invalid processing of constant <code>LowCardinality</code> argument in function <code>arrayMap</code>. This bug could lead to a segfault in release, and logical error <code>Bad cast</code> in debug build. <a href="https://github.com/ClickHouse/ClickHouse/pull/46569" target="_blank" rel="noopener noreferrer">#46569</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/46557" target="_blank" rel="noopener noreferrer">#46557</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46611" target="_blank" rel="noopener noreferrer">#46611</a> (<a href="https://github.com/davenger" target="_blank" rel="noopener noreferrer">Alexander Gololobov</a>).</li><li>Fix endless restarts of clickhouse-server systemd unit if server cannot start within 1m30sec (Disable timeout logic for starting clickhouse-server from systemd service). <a href="https://github.com/ClickHouse/ClickHouse/pull/46613" target="_blank" rel="noopener noreferrer">#46613</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Allocated during asynchronous inserts memory buffers were deallocated in the global context and MemoryTracker counters for corresponding user and query were not updated correctly. That led to false positive OOM exceptions. <a href="https://github.com/ClickHouse/ClickHouse/pull/46622" target="_blank" rel="noopener noreferrer">#46622</a> (<a href="https://github.com/novikd" target="_blank" rel="noopener noreferrer">Dmitry Novik</a>).</li><li>Updated to not clear on_expression from table_join as its used by future analyze runs resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/45185" target="_blank" rel="noopener noreferrer">#45185</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/46487" target="_blank" rel="noopener noreferrer">#46487</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="-clickhouse-release-231-2023-01-26"><a id="231"></a> ClickHouse release 23.1, 2023-01-26<a href="#-clickhouse-release-231-2023-01-26" class="hash-link" aria-label="Direct link to -clickhouse-release-231-2023-01-26" title="Direct link to -clickhouse-release-231-2023-01-26">​</a></h3><h3 class="anchor anchorWithStickyNavbar_LWe7" id="clickhouse-release-231">ClickHouse release 23.1<a href="#clickhouse-release-231" class="hash-link" aria-label="Direct link to ClickHouse release 23.1" title="Direct link to ClickHouse release 23.1">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="upgrade-notes">Upgrade Notes<a href="#upgrade-notes" class="hash-link" aria-label="Direct link to Upgrade Notes" title="Direct link to Upgrade Notes">​</a></h4><ul><li>The <code>SYSTEM RESTART DISK</code> query becomes a no-op. <a href="https://github.com/ClickHouse/ClickHouse/pull/44647" target="_blank" rel="noopener noreferrer">#44647</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>).</li><li>The <code>PREALLOCATE</code> option for <code>HASHED</code>/<code>SPARSE_HASHED</code> dictionaries becomes a no-op. <a href="https://github.com/ClickHouse/ClickHouse/pull/45388" target="_blank" rel="noopener noreferrer">#45388</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>). It does not give significant advantages anymore.</li><li>Disallow <code>Gorilla</code> codec on columns of non-Float32 or non-Float64 type. <a href="https://github.com/ClickHouse/ClickHouse/pull/45252" target="_blank" rel="noopener noreferrer">#45252</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>). It was pointless and led to inconsistencies. </li><li>Parallel quorum inserts might work incorrectly with <code>*MergeTree</code> tables created with the deprecated syntax. Therefore, parallel quorum inserts support is completely disabled for such tables. It does not affect tables created with a new syntax. <a href="https://github.com/ClickHouse/ClickHouse/pull/45430" target="_blank" rel="noopener noreferrer">#45430</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">Alexander Tokmakov</a>).</li><li>Use the <code>GetObjectAttributes</code> request instead of the <code>HeadObject</code> request to get the size of an object in AWS S3. This change fixes handling endpoints without explicit regions after updating the AWS SDK, for example. <a href="https://github.com/ClickHouse/ClickHouse/pull/45288" target="_blank" rel="noopener noreferrer">#45288</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>). AWS S3 and Minio are tested, but keep in mind that various S3-compatible services (GCS, R2, B2) may have subtle incompatibilities. This change also may require you to adjust the ACL to allow the <code>GetObjectAttributes</code> request.</li><li>Forbid paths in timezone names. For example, a timezone name like <code>/usr/share/zoneinfo/Asia/Aden</code> is not allowed; the IANA timezone database name like <code>Asia/Aden</code> should be used. <a href="https://github.com/ClickHouse/ClickHouse/pull/44225" target="_blank" rel="noopener noreferrer">#44225</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="new-feature-1">New Feature<a href="#new-feature-1" class="hash-link" aria-label="Direct link to New Feature" title="Direct link to New Feature">​</a></h4><ul><li>Dictionary source for extracting keys by traversing regular expressions tree. It can be used for User-Agent parsing. <a href="https://github.com/ClickHouse/ClickHouse/pull/40878" target="_blank" rel="noopener noreferrer">#40878</a> (<a href="https://github.com/nooblose" target="_blank" rel="noopener noreferrer">Vage Ogannisian</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/43858" target="_blank" rel="noopener noreferrer">#43858</a> (<a href="https://github.com/hanfei1991" target="_blank" rel="noopener noreferrer">Han Fei</a>).</li><li>Added parametrized view functionality, now it&#x27;s possible to specify query parameters for the View table engine. resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/40907" target="_blank" rel="noopener noreferrer">#40907</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/41687" target="_blank" rel="noopener noreferrer">#41687</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>Add <code>quantileInterpolatedWeighted</code>/<code>quantilesInterpolatedWeighted</code> functions. <a href="https://github.com/ClickHouse/ClickHouse/pull/38252" target="_blank" rel="noopener noreferrer">#38252</a> (<a href="https://github.com/bharatnc" target="_blank" rel="noopener noreferrer">Bharat Nallan</a>).</li><li>Array join support for the <code>Map</code> type, like the function &quot;explode&quot; in Spark. <a href="https://github.com/ClickHouse/ClickHouse/pull/43239" target="_blank" rel="noopener noreferrer">#43239</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Support SQL standard binary and hex string literals. <a href="https://github.com/ClickHouse/ClickHouse/pull/43785" target="_blank" rel="noopener noreferrer">#43785</a> (<a href="https://github.com/mo-avatar" target="_blank" rel="noopener noreferrer">Mo Xuan</a>).</li><li>Allow formatting <code>DateTime</code> in Joda-Time style. Refer to <a href="https://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html" target="_blank" rel="noopener noreferrer">the Joda-Time docs</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43818" target="_blank" rel="noopener noreferrer">#43818</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Implemented a fractional second formatter (<code>%f</code>) for <code>formatDateTime</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44060" target="_blank" rel="noopener noreferrer">#44060</a> (<a href="https://github.com/ltrk2" target="_blank" rel="noopener noreferrer">ltrk2</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/44497" target="_blank" rel="noopener noreferrer">#44497</a> (<a href="https://github.com/davenger" target="_blank" rel="noopener noreferrer">Alexander Gololobov</a>).</li><li>Added <code>age</code> function to calculate the difference between two dates or dates with time values expressed as the number of full units. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/41115" target="_blank" rel="noopener noreferrer">#41115</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44421" target="_blank" rel="noopener noreferrer">#44421</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Add <code>Null</code> source for dictionaries. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44240" target="_blank" rel="noopener noreferrer">#44240</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44502" target="_blank" rel="noopener noreferrer">#44502</a> (<a href="https://github.com/mayamika" target="_blank" rel="noopener noreferrer">mayamika</a>).</li><li>Allow configuring the S3 storage class with the <code>s3_storage_class</code> configuration option. Such as <code>&lt;s3_storage_class&gt;STANDARD/INTELLIGENT_TIERING&lt;/s3_storage_class&gt;</code> Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44443" target="_blank" rel="noopener noreferrer">#44443</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44707" target="_blank" rel="noopener noreferrer">#44707</a> (<a href="https://github.com/xiedeyantu" target="_blank" rel="noopener noreferrer">chen</a>).</li><li>Insert default values in case of missing elements in JSON object while parsing named tuple. Add setting <code>input_format_json_defaults_for_missing_elements_in_named_tuple</code> that controls this behaviour. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45142" target="_blank" rel="noopener noreferrer">#45142</a>#issuecomment-1380153217. <a href="https://github.com/ClickHouse/ClickHouse/pull/45231" target="_blank" rel="noopener noreferrer">#45231</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Record server startup time in ProfileEvents (<code>ServerStartupMilliseconds</code>). Resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/43188" target="_blank" rel="noopener noreferrer">#43188</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45250" target="_blank" rel="noopener noreferrer">#45250</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>Refactor and Improve streaming engines Kafka/RabbitMQ/NATS and add support for all formats, also refactor formats a bit: - Fix producing messages in row-based formats with suffixes/prefixes. Now every message is formatted completely with all delimiters and can be parsed back using input format. - Support block-based formats like Native, Parquet, ORC, etc. Every block is formatted as a separate message. The number of rows in one message depends on the block size, so you can control it via the setting <code>max_block_size</code>. - Add new engine settings <code>kafka_max_rows_per_message/rabbitmq_max_rows_per_message/nats_max_rows_per_message</code>. They control the number of rows formatted in one message in row-based formats. Default value: 1. - Fix high memory consumption in the NATS table engine. - Support arbitrary binary data in NATS producer (previously it worked only with strings contained \0 at the end) - Add missing Kafka/RabbitMQ/NATS engine settings in the documentation. - Refactor producing and consuming in Kafka/RabbitMQ/NATS, separate it from WriteBuffers/ReadBuffers semantic. - Refactor output formats: remove callbacks on each row used in Kafka/RabbitMQ/NATS (now we don&#x27;t use callbacks there), allow to use IRowOutputFormat directly, clarify row end and row between delimiters, make it possible to reset output format to start formatting again - Add proper implementation in formatRow function (bonus after formats refactoring). <a href="https://github.com/ClickHouse/ClickHouse/pull/42777" target="_blank" rel="noopener noreferrer">#42777</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Support reading/writing <code>Nested</code> tables as <code>List</code> of <code>Struct</code> in <code>CapnProto</code> format. Read/write <code>Decimal32/64</code> as <code>Int32/64</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/43319" target="_blank" rel="noopener noreferrer">#43319</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43379" target="_blank" rel="noopener noreferrer">#43379</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Added a <code>message_format_string</code> column to <code>system.text_log</code>. The column contains a pattern that was used to format the message. <a href="https://github.com/ClickHouse/ClickHouse/pull/44543" target="_blank" rel="noopener noreferrer">#44543</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">Alexander Tokmakov</a>). This allows various analytics over the ClickHouse logs.</li><li>Try to autodetect headers with column names (and maybe types) for CSV/TSV/CustomSeparated input formats.
Add settings input_format_tsv/csv/custom_detect_header that enable this behaviour (enabled by default). Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44640" target="_blank" rel="noopener noreferrer">#44640</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44953" target="_blank" rel="noopener noreferrer">#44953</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="experimental-feature">Experimental Feature<a href="#experimental-feature" class="hash-link" aria-label="Direct link to Experimental Feature" title="Direct link to Experimental Feature">​</a></h4><ul><li>Add an experimental inverted index as a new secondary index type for efficient text search. <a href="https://github.com/ClickHouse/ClickHouse/pull/38667" target="_blank" rel="noopener noreferrer">#38667</a> (<a href="https://github.com/larryluogit" target="_blank" rel="noopener noreferrer">larryluogit</a>).</li><li>Add experimental query result cache. <a href="https://github.com/ClickHouse/ClickHouse/pull/43797" target="_blank" rel="noopener noreferrer">#43797</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Added extendable and configurable scheduling subsystem for IO requests (not yet integrated with IO code itself). <a href="https://github.com/ClickHouse/ClickHouse/pull/41840" target="_blank" rel="noopener noreferrer">#41840</a> (<a href="https://github.com/serxa" target="_blank" rel="noopener noreferrer">Sergei Trifonov</a>). This feature does nothing at all, enjoy.</li><li>Added <code>SYSTEM DROP DATABASE REPLICA</code> that removes metadata of a dead replica of a <code>Replicated</code> database. Resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/41794" target="_blank" rel="noopener noreferrer">#41794</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/42807" target="_blank" rel="noopener noreferrer">#42807</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">Alexander Tokmakov</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="performance-improvement-1">Performance Improvement<a href="#performance-improvement-1" class="hash-link" aria-label="Direct link to Performance Improvement" title="Direct link to Performance Improvement">​</a></h4><ul><li>Do not load inactive parts at startup of <code>MergeTree</code> tables. <a href="https://github.com/ClickHouse/ClickHouse/pull/42181" target="_blank" rel="noopener noreferrer">#42181</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Improved latency of reading from storage <code>S3</code> and table function <code>s3</code> with large numbers of small files. Now settings <code>remote_filesystem_read_method</code> and <code>remote_filesystem_read_prefetch</code> take effect while reading from storage <code>S3</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43726" target="_blank" rel="noopener noreferrer">#43726</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Optimization for reading struct fields in Parquet/ORC files. Only the required fields are loaded. <a href="https://github.com/ClickHouse/ClickHouse/pull/44484" target="_blank" rel="noopener noreferrer">#44484</a> (<a href="https://github.com/lgbo-ustc" target="_blank" rel="noopener noreferrer">lgbo</a>).</li><li>Two-level aggregation algorithm was mistakenly disabled for queries over the HTTP interface. It was enabled back, and it leads to a major performance improvement. <a href="https://github.com/ClickHouse/ClickHouse/pull/45450" target="_blank" rel="noopener noreferrer">#45450</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Added mmap support for StorageFile, which should improve the performance of clickhouse-local. <a href="https://github.com/ClickHouse/ClickHouse/pull/43927" target="_blank" rel="noopener noreferrer">#43927</a> (<a href="https://github.com/pufit" target="_blank" rel="noopener noreferrer">pufit</a>).</li><li>Added sharding support in HashedDictionary to allow parallel load (almost linear scaling based on number of shards). <a href="https://github.com/ClickHouse/ClickHouse/pull/40003" target="_blank" rel="noopener noreferrer">#40003</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Speed up query parsing. <a href="https://github.com/ClickHouse/ClickHouse/pull/42284" target="_blank" rel="noopener noreferrer">#42284</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Always replace OR chain <code>expr = x1 OR ... OR expr = xN</code> to <code>expr IN (x1, ..., xN)</code> in the case where <code>expr</code> is a <code>LowCardinality</code> column. Setting <code>optimize_min_equality_disjunction_chain_length</code> is ignored in this case. <a href="https://github.com/ClickHouse/ClickHouse/pull/42889" target="_blank" rel="noopener noreferrer">#42889</a> (<a href="https://github.com/guowangy" target="_blank" rel="noopener noreferrer">Guo Wangyang</a>).</li><li>Slightly improve performance by optimizing the code around ThreadStatus. <a href="https://github.com/ClickHouse/ClickHouse/pull/43586" target="_blank" rel="noopener noreferrer">#43586</a> (<a href="https://github.com/ZhiguoZh" target="_blank" rel="noopener noreferrer">Zhiguo Zhou</a>).</li><li>Optimize the column-wise ternary logic evaluation by achieving auto-vectorization. In the performance test of this <a href="https://github.com/ZhiguoZh/ClickHouse/blob/20221123-ternary-logic-opt-example/src/Functions/examples/associative_applier_perf.cpp" target="_blank" rel="noopener noreferrer">microbenchmark</a>, we&#x27;ve observed a peak <strong>performance gain</strong> of <strong>21x</strong> on the ICX device (Intel Xeon Platinum 8380 CPU). <a href="https://github.com/ClickHouse/ClickHouse/pull/43669" target="_blank" rel="noopener noreferrer">#43669</a> (<a href="https://github.com/ZhiguoZh" target="_blank" rel="noopener noreferrer">Zhiguo Zhou</a>).</li><li>Avoid acquiring read locks in the <code>system.tables</code> table if possible. <a href="https://github.com/ClickHouse/ClickHouse/pull/43840" target="_blank" rel="noopener noreferrer">#43840</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Optimize ThreadPool. The performance experiments of SSB (Star Schema Benchmark) on the ICX device (Intel Xeon Platinum 8380 CPU, 80 cores, 160 threads) shows that this change could effectively decrease the lock contention for ThreadPoolImpl::mutex by <strong>75%</strong>, increasing the CPU utilization and improving the overall performance by <strong>2.4%</strong>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44308" target="_blank" rel="noopener noreferrer">#44308</a> (<a href="https://github.com/ZhiguoZh" target="_blank" rel="noopener noreferrer">Zhiguo Zhou</a>).</li><li>Now the optimisation for predicting the hash table size is applied only if the cached hash table size is sufficiently large (thresholds were determined empirically and hardcoded). <a href="https://github.com/ClickHouse/ClickHouse/pull/44455" target="_blank" rel="noopener noreferrer">#44455</a> (<a href="https://github.com/nickitat" target="_blank" rel="noopener noreferrer">Nikita Taranov</a>).</li><li>Small performance improvement for asynchronous reading from remote filesystems. <a href="https://github.com/ClickHouse/ClickHouse/pull/44868" target="_blank" rel="noopener noreferrer">#44868</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Add fast path for: - <code>col like &#x27;%%&#x27;</code>; - <code>col like &#x27;%&#x27;</code>; - <code>col not like &#x27;%&#x27;</code>; - <code>col not like &#x27;%&#x27;</code>; - <code>match(col, &#x27;.*&#x27;)</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45244" target="_blank" rel="noopener noreferrer">#45244</a> (<a href="https://github.com/taiyang-li" target="_blank" rel="noopener noreferrer">李扬</a>).</li><li>Slightly improve happy path optimisation in filtering (WHERE clause). <a href="https://github.com/ClickHouse/ClickHouse/pull/45289" target="_blank" rel="noopener noreferrer">#45289</a> (<a href="https://github.com/nickitat" target="_blank" rel="noopener noreferrer">Nikita Taranov</a>).</li><li>Provide monotonicity info for <code>toUnixTimestamp64*</code> to enable more algebraic optimizations for index analysis. <a href="https://github.com/ClickHouse/ClickHouse/pull/44116" target="_blank" rel="noopener noreferrer">#44116</a> (<a href="https://github.com/nickitat" target="_blank" rel="noopener noreferrer">Nikita Taranov</a>).</li><li>Allow the configuration of temporary data for query processing (spilling to disk) to cooperate with the filesystem cache (taking up the space from the cache disk) <a href="https://github.com/ClickHouse/ClickHouse/pull/43972" target="_blank" rel="noopener noreferrer">#43972</a> (<a href="https://github.com/vdimir" target="_blank" rel="noopener noreferrer">Vladimir C</a>). This mainly improves <a href="https://clickhouse.cloud/" target="_blank" rel="noopener noreferrer">ClickHouse Cloud</a>, but can be used for self-managed setups as well, if you know what to do.</li><li>Make <code>system.replicas</code> table do parallel fetches of replicas statuses. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/43918" target="_blank" rel="noopener noreferrer">#43918</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43998" target="_blank" rel="noopener noreferrer">#43998</a> (<a href="https://github.com/evillique" target="_blank" rel="noopener noreferrer">Nikolay Degterinsky</a>).</li><li>Optimize memory consumption during backup to S3: files to S3 now will be copied directly without using <code>WriteBufferFromS3</code> (which could use a lot of memory). <a href="https://github.com/ClickHouse/ClickHouse/pull/45188" target="_blank" rel="noopener noreferrer">#45188</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>).</li><li>Add a cache for async block ids. This will reduce the number of requests of ZooKeeper when we enable async inserts deduplication. <a href="https://github.com/ClickHouse/ClickHouse/pull/45106" target="_blank" rel="noopener noreferrer">#45106</a> (<a href="https://github.com/hanfei1991" target="_blank" rel="noopener noreferrer">Han Fei</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="improvement-1">Improvement<a href="#improvement-1" class="hash-link" aria-label="Direct link to Improvement" title="Direct link to Improvement">​</a></h4><ul><li>Use structure from insertion table in generateRandom without arguments. <a href="https://github.com/ClickHouse/ClickHouse/pull/45239" target="_blank" rel="noopener noreferrer">#45239</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Allow to implicitly convert floats stored in string fields of JSON to integers in <code>JSONExtract</code> functions. E.g. <code>JSONExtract(&#x27;{&quot;a&quot;: &quot;1000.111&quot;}&#x27;, &#x27;a&#x27;, &#x27;UInt64&#x27;)</code> -&gt; <code>1000</code>, previously it returned 0. <a href="https://github.com/ClickHouse/ClickHouse/pull/45432" target="_blank" rel="noopener noreferrer">#45432</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Added fields <code>supports_parallel_parsing</code> and <code>supports_parallel_formatting</code> to table <code>system.formats</code> for better introspection. <a href="https://github.com/ClickHouse/ClickHouse/pull/45499" target="_blank" rel="noopener noreferrer">#45499</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Improve reading CSV field in CustomSeparated/Template format. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/42352" target="_blank" rel="noopener noreferrer">#42352</a> Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/39620" target="_blank" rel="noopener noreferrer">#39620</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43332" target="_blank" rel="noopener noreferrer">#43332</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Unify query elapsed time measurements. <a href="https://github.com/ClickHouse/ClickHouse/pull/43455" target="_blank" rel="noopener noreferrer">#43455</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Improve automatic usage of structure from insertion table in table functions file/hdfs/s3 when virtual columns are present in a select query, it fixes the possible error <code>Block structure mismatch</code> or <code>number of columns mismatch</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43695" target="_blank" rel="noopener noreferrer">#43695</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Add support for signed arguments in the function <code>range</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/43333" target="_blank" rel="noopener noreferrer">#43333</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43733" target="_blank" rel="noopener noreferrer">#43733</a> (<a href="https://github.com/wineternity" target="_blank" rel="noopener noreferrer">sanyu</a>).</li><li>Remove redundant sorting, for example, sorting related ORDER BY clauses in subqueries. Implemented on top of query plan. It does similar optimization as <code>optimize_duplicate_order_by_and_distinct</code> regarding <code>ORDER BY</code> clauses, but more generic, since it&#x27;s applied to any redundant sorting steps (not only caused by ORDER BY clause) and applied to subqueries of any depth. Related to <a href="https://github.com/ClickHouse/ClickHouse/issues/42648" target="_blank" rel="noopener noreferrer">#42648</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43905" target="_blank" rel="noopener noreferrer">#43905</a> (<a href="https://github.com/devcrafter" target="_blank" rel="noopener noreferrer">Igor Nikonov</a>).</li><li>Add the ability to disable deduplication of files for BACKUP (for backups without deduplication ATTACH can be used instead of full RESTORE). For example <code>BACKUP foo TO S3(...) SETTINGS deduplicate_files=0</code> (default <code>deduplicate_files=1</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/43947" target="_blank" rel="noopener noreferrer">#43947</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Refactor and improve schema inference for text formats. Add new setting <code>schema_inference_make_columns_nullable</code> that controls making result types <code>Nullable</code> (enabled by default);. <a href="https://github.com/ClickHouse/ClickHouse/pull/44019" target="_blank" rel="noopener noreferrer">#44019</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Better support for <code>PROXYv1</code> protocol. <a href="https://github.com/ClickHouse/ClickHouse/pull/44135" target="_blank" rel="noopener noreferrer">#44135</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>Add information about the latest part check by cleanup threads into <code>system.parts</code> table. <a href="https://github.com/ClickHouse/ClickHouse/pull/44244" target="_blank" rel="noopener noreferrer">#44244</a> (<a href="https://github.com/novikd" target="_blank" rel="noopener noreferrer">Dmitry Novik</a>).</li><li>Disable table functions in readonly mode for inserts. <a href="https://github.com/ClickHouse/ClickHouse/pull/44290" target="_blank" rel="noopener noreferrer">#44290</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>Add a setting <code>simultaneous_parts_removal_limit</code> to allow limiting the number of parts being processed by one iteration of CleanupThread. <a href="https://github.com/ClickHouse/ClickHouse/pull/44461" target="_blank" rel="noopener noreferrer">#44461</a> (<a href="https://github.com/novikd" target="_blank" rel="noopener noreferrer">Dmitry Novik</a>).</li><li>Do not initialize ReadBufferFromS3 when only virtual columns are needed in a query. This may be helpful to <a href="https://github.com/ClickHouse/ClickHouse/issues/44246" target="_blank" rel="noopener noreferrer">#44246</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44493" target="_blank" rel="noopener noreferrer">#44493</a> (<a href="https://github.com/xiedeyantu" target="_blank" rel="noopener noreferrer">chen</a>).</li><li>Prevent duplicate column names hints. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44130" target="_blank" rel="noopener noreferrer">#44130</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44519" target="_blank" rel="noopener noreferrer">#44519</a> (<a href="https://github.com/jh0x" target="_blank" rel="noopener noreferrer">Joanna Hulboj</a>).</li><li>Allow macro substitution in endpoint of disks. Resolve <a href="https://github.com/ClickHouse/ClickHouse/issues/40951" target="_blank" rel="noopener noreferrer">#40951</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44533" target="_blank" rel="noopener noreferrer">#44533</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>Improve schema inference when <code>input_format_json_read_object_as_string</code> is enabled. <a href="https://github.com/ClickHouse/ClickHouse/pull/44546" target="_blank" rel="noopener noreferrer">#44546</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Add a user-level setting <code>database_replicated_allow_replicated_engine_arguments</code> which allows banning the creation of <code>ReplicatedMergeTree</code> tables with arguments in <code>DatabaseReplicated</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44566" target="_blank" rel="noopener noreferrer">#44566</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>).</li><li>Prevent users from mistakenly specifying zero (invalid) value for <code>index_granularity</code>. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44536" target="_blank" rel="noopener noreferrer">#44536</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44578" target="_blank" rel="noopener noreferrer">#44578</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Added possibility to set path to service keytab file in <code>keytab</code> parameter in <code>kerberos</code> section of config.xml. <a href="https://github.com/ClickHouse/ClickHouse/pull/44594" target="_blank" rel="noopener noreferrer">#44594</a> (<a href="https://github.com/rvasin" target="_blank" rel="noopener noreferrer">Roman Vasin</a>).</li><li>Use already written part of the query for fuzzy search (pass to the <code>skim</code> library, which is written in Rust and linked statically to ClickHouse). <a href="https://github.com/ClickHouse/ClickHouse/pull/44600" target="_blank" rel="noopener noreferrer">#44600</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Enable <code>input_format_json_read_objects_as_strings</code> by default to be able to read nested JSON objects while JSON Object type is experimental. <a href="https://github.com/ClickHouse/ClickHouse/pull/44657" target="_blank" rel="noopener noreferrer">#44657</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Improvement for deduplication of async inserts: when users do duplicate async inserts, we should deduplicate inside the memory before we query Keeper. <a href="https://github.com/ClickHouse/ClickHouse/pull/44682" target="_blank" rel="noopener noreferrer">#44682</a> (<a href="https://github.com/hanfei1991" target="_blank" rel="noopener noreferrer">Han Fei</a>).</li><li>Input/ouptut <code>Avro</code> format will parse bool type as ClickHouse bool type. <a href="https://github.com/ClickHouse/ClickHouse/pull/44684" target="_blank" rel="noopener noreferrer">#44684</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Support Bool type in Arrow/Parquet/ORC. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/43970" target="_blank" rel="noopener noreferrer">#43970</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44698" target="_blank" rel="noopener noreferrer">#44698</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Don&#x27;t greedily parse beyond the quotes when reading UUIDs - it may lead to mistakenly successful parsing of incorrect data. <a href="https://github.com/ClickHouse/ClickHouse/pull/44686" target="_blank" rel="noopener noreferrer">#44686</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Infer UInt64 in case of Int64 overflow and fix some transforms in schema inference. <a href="https://github.com/ClickHouse/ClickHouse/pull/44696" target="_blank" rel="noopener noreferrer">#44696</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Previously dependency resolving inside <code>Replicated</code> database was done in a hacky way, and now it&#x27;s done right using an explicit graph. <a href="https://github.com/ClickHouse/ClickHouse/pull/44697" target="_blank" rel="noopener noreferrer">#44697</a> (<a href="https://github.com/nikitamikhaylov" target="_blank" rel="noopener noreferrer">Nikita Mikhaylov</a>).</li><li>Fix <code>output_format_pretty_row_numbers</code> does not preserve the counter across the blocks. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44815" target="_blank" rel="noopener noreferrer">#44815</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44832" target="_blank" rel="noopener noreferrer">#44832</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Don&#x27;t report errors in <code>system.errors</code> due to parts being merged concurrently with the background cleanup process. <a href="https://github.com/ClickHouse/ClickHouse/pull/44874" target="_blank" rel="noopener noreferrer">#44874</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Optimize and fix metrics for Distributed async INSERT. <a href="https://github.com/ClickHouse/ClickHouse/pull/44922" target="_blank" rel="noopener noreferrer">#44922</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Added settings to disallow concurrent backups and restores resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/43891" target="_blank" rel="noopener noreferrer">#43891</a> Implementation: <em> Added server-level settings to disallow concurrent backups and restores, which are read and set when BackupWorker is created in Context. </em> Settings are set to true by default. * Before starting backup or restores, added a check to see if any other backups/restores are running. For internal requests, it checks if it is from the self node using backup_uuid. <a href="https://github.com/ClickHouse/ClickHouse/pull/45072" target="_blank" rel="noopener noreferrer">#45072</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>Add <code>&lt;storage_policy&gt;</code> config parameter for system logs. <a href="https://github.com/ClickHouse/ClickHouse/pull/45320" target="_blank" rel="noopener noreferrer">#45320</a> (<a href="https://github.com/stigsb" target="_blank" rel="noopener noreferrer">Stig Bakken</a>).</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="buildtestingpackaging-improvement-1">Build/Testing/Packaging Improvement<a href="#buildtestingpackaging-improvement-1" class="hash-link" aria-label="Direct link to Build/Testing/Packaging Improvement" title="Direct link to Build/Testing/Packaging Improvement">​</a></h4><ul><li>Statically link with the <code>skim</code> library (it is written in Rust) for fuzzy search in clickhouse client/local history. <a href="https://github.com/ClickHouse/ClickHouse/pull/44239" target="_blank" rel="noopener noreferrer">#44239</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>We removed support for shared linking because of Rust. Actually, Rust is only an excuse for this removal, and we wanted to remove it nevertheless. <a href="https://github.com/ClickHouse/ClickHouse/pull/44828" target="_blank" rel="noopener noreferrer">#44828</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Remove the dependency on the <code>adduser</code> tool from the packages, because we don&#x27;t use it. This fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44934" target="_blank" rel="noopener noreferrer">#44934</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45011" target="_blank" rel="noopener noreferrer">#45011</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>The <code>SQLite</code> library is updated to the latest. It is used for the SQLite database and table integration engines. Also, fixed a false-positive TSan report. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45027" target="_blank" rel="noopener noreferrer">#45027</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45031" target="_blank" rel="noopener noreferrer">#45031</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>CRC-32 changes to address the WeakHash collision issue in PowerPC. <a href="https://github.com/ClickHouse/ClickHouse/pull/45144" target="_blank" rel="noopener noreferrer">#45144</a> (<a href="https://github.com/MeenaRenganathan22" target="_blank" rel="noopener noreferrer">MeenaRenganathan22</a>).</li><li>Update aws-c* submodules <a href="https://github.com/ClickHouse/ClickHouse/pull/43020" target="_blank" rel="noopener noreferrer">#43020</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>).</li><li>Automatically merge green backport PRs and green approved PRs <a href="https://github.com/ClickHouse/ClickHouse/pull/41110" target="_blank" rel="noopener noreferrer">#41110</a> (<a href="https://github.com/Felixoid" target="_blank" rel="noopener noreferrer">Mikhail f. Shiryaev</a>).</li><li>Introduce a <a href="https://aretestsgreenyet.com/" target="_blank" rel="noopener noreferrer">website</a> for the status of ClickHouse CI. <a href="https://github.com/ClickHouse/aretestsgreenyet" target="_blank" rel="noopener noreferrer">Source</a>.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="bug-fix">Bug Fix<a href="#bug-fix" class="hash-link" aria-label="Direct link to Bug Fix" title="Direct link to Bug Fix">​</a></h4><ul><li>Replace domain IP types (IPv4, IPv6) with native. <a href="https://github.com/ClickHouse/ClickHouse/pull/43221" target="_blank" rel="noopener noreferrer">#43221</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>). It automatically fixes some missing implementations in the code.</li><li>Fix the backup process if mutations get killed during the backup process. <a href="https://github.com/ClickHouse/ClickHouse/pull/45351" target="_blank" rel="noopener noreferrer">#45351</a> (<a href="https://github.com/vitlibar" target="_blank" rel="noopener noreferrer">Vitaly Baranov</a>).</li><li>Fix the <code>Invalid number of rows in Chunk</code> exception message. <a href="https://github.com/ClickHouse/ClickHouse/issues/41404" target="_blank" rel="noopener noreferrer">#41404</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/42126" target="_blank" rel="noopener noreferrer">#42126</a> (<a href="https://github.com/davenger" target="_blank" rel="noopener noreferrer">Alexander Gololobov</a>).</li><li>Fix possible use of an uninitialized value after executing expressions after sorting. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/43386" target="_blank" rel="noopener noreferrer">#43386</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/43635" target="_blank" rel="noopener noreferrer">#43635</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Better handling of NULL in aggregate combinators, fix possible segfault/logical error while using an obscure optimization <code>optimize_rewrite_sum_if_to_count_if</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/43758" target="_blank" rel="noopener noreferrer">#43758</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/43813" target="_blank" rel="noopener noreferrer">#43813</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix CREATE USER/ROLE query settings constraints. <a href="https://github.com/ClickHouse/ClickHouse/pull/43993" target="_blank" rel="noopener noreferrer">#43993</a> (<a href="https://github.com/evillique" target="_blank" rel="noopener noreferrer">Nikolay Degterinsky</a>).</li><li>Fix incorrect behavior of <code>JOIN ON t1.x = t2.x AND 1 = 1</code>, forbid such queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/44016" target="_blank" rel="noopener noreferrer">#44016</a> (<a href="https://github.com/vdimir" target="_blank" rel="noopener noreferrer">Vladimir C</a>).</li><li>Fixed bug with non-parsable default value for <code>EPHEMERAL</code> column in table metadata. <a href="https://github.com/ClickHouse/ClickHouse/pull/44026" target="_blank" rel="noopener noreferrer">#44026</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>Fix parsing of bad version from compatibility setting. <a href="https://github.com/ClickHouse/ClickHouse/pull/44224" target="_blank" rel="noopener noreferrer">#44224</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Bring interval subtraction from datetime in line with addition. <a href="https://github.com/ClickHouse/ClickHouse/pull/44241" target="_blank" rel="noopener noreferrer">#44241</a> (<a href="https://github.com/ltrk2" target="_blank" rel="noopener noreferrer">ltrk2</a>).</li><li>Remove limits on the maximum size of the result for view. <a href="https://github.com/ClickHouse/ClickHouse/pull/44261" target="_blank" rel="noopener noreferrer">#44261</a> (<a href="https://github.com/lzydmxy" target="_blank" rel="noopener noreferrer">lizhuoyu5</a>).</li><li>Fix possible logical error in cache if <code>do_not_evict_index_and_mrk_files=1</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/42142" target="_blank" rel="noopener noreferrer">#42142</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44268" target="_blank" rel="noopener noreferrer">#44268</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Fix possible too early cache write interruption in write-through cache (caching could be stopped due to false assumption when it shouldn&#x27;t have). <a href="https://github.com/ClickHouse/ClickHouse/pull/44289" target="_blank" rel="noopener noreferrer">#44289</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Fix possible crash in the case function <code>IN</code> with constant arguments was used as a constant argument together with <code>LowCardinality</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44221" target="_blank" rel="noopener noreferrer">#44221</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44346" target="_blank" rel="noopener noreferrer">#44346</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Fix support for complex parameters (like arrays) of parametric aggregate functions. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/30975" target="_blank" rel="noopener noreferrer">#30975</a>. The aggregate function <code>sumMapFiltered</code> was unusable in distributed queries before this change. <a href="https://github.com/ClickHouse/ClickHouse/pull/44358" target="_blank" rel="noopener noreferrer">#44358</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Fix reading ObjectId in BSON schema inference. <a href="https://github.com/ClickHouse/ClickHouse/pull/44382" target="_blank" rel="noopener noreferrer">#44382</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix race which can lead to premature temp parts removal before merge finishes in ReplicatedMergeTree. This issue could lead to errors like <code>No such file or directory: xxx</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/43983" target="_blank" rel="noopener noreferrer">#43983</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44383" target="_blank" rel="noopener noreferrer">#44383</a> (<a href="https://github.com/alesapin" target="_blank" rel="noopener noreferrer">alesapin</a>).</li><li>Some invalid <code>SYSTEM ... ON CLUSTER</code> queries worked in an unexpected way if a cluster name was not specified. It&#x27;s fixed, now invalid queries throw <code>SYNTAX_ERROR</code> as they should. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44264" target="_blank" rel="noopener noreferrer">#44264</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44387" target="_blank" rel="noopener noreferrer">#44387</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">Alexander Tokmakov</a>).</li><li>Fix reading Map type in ORC format. <a href="https://github.com/ClickHouse/ClickHouse/pull/44400" target="_blank" rel="noopener noreferrer">#44400</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix reading columns that are not presented in input data in Parquet/ORC formats. Previously it could lead to error <code>INCORRECT_NUMBER_OF_COLUMNS</code>. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44333" target="_blank" rel="noopener noreferrer">#44333</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44405" target="_blank" rel="noopener noreferrer">#44405</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Previously the <code>bar</code> function used the same &#x27;▋&#x27; (U+258B &quot;Left five eighths block&quot;) character to display both 5/8 and 6/8 bars. This change corrects this behavior by using &#x27;▊&#x27; (U+258A &quot;Left three quarters block&quot;) for displaying 6/8 bar. <a href="https://github.com/ClickHouse/ClickHouse/pull/44410" target="_blank" rel="noopener noreferrer">#44410</a> (<a href="https://github.com/davenger" target="_blank" rel="noopener noreferrer">Alexander Gololobov</a>).</li><li>Placing profile settings after profile settings constraints in the configuration file made constraints ineffective. <a href="https://github.com/ClickHouse/ClickHouse/pull/44411" target="_blank" rel="noopener noreferrer">#44411</a> (<a href="https://github.com/thevar1able" target="_blank" rel="noopener noreferrer">Konstantin Bogdanov</a>).</li><li>Fix <code>SYNTAX_ERROR</code> while running <code>EXPLAIN AST INSERT</code> queries with data. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44207" target="_blank" rel="noopener noreferrer">#44207</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44413" target="_blank" rel="noopener noreferrer">#44413</a> (<a href="https://github.com/save-my-heart" target="_blank" rel="noopener noreferrer">save-my-heart</a>).</li><li>Fix reading bool value with CRLF in CSV format. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44401" target="_blank" rel="noopener noreferrer">#44401</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44442" target="_blank" rel="noopener noreferrer">#44442</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Don&#x27;t execute and/or/if/multiIf on a LowCardinality dictionary, so the result type cannot be LowCardinality. It could lead to the error <code>Illegal column ColumnLowCardinality</code> in some cases. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/43603" target="_blank" rel="noopener noreferrer">#43603</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44469" target="_blank" rel="noopener noreferrer">#44469</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix mutations with the setting <code>max_streams_for_merge_tree_reading</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44472" target="_blank" rel="noopener noreferrer">#44472</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Fix potential null pointer dereference with GROUPING SETS in ASTSelectQuery::formatImpl (<a href="https://github.com/ClickHouse/ClickHouse/issues/43049" target="_blank" rel="noopener noreferrer">#43049</a>). <a href="https://github.com/ClickHouse/ClickHouse/pull/44479" target="_blank" rel="noopener noreferrer">#44479</a> (<a href="https://github.com/rschu1ze" target="_blank" rel="noopener noreferrer">Robert Schulze</a>).</li><li>Validate types in table function arguments, CAST function arguments, JSONAsObject schema inference according to settings. <a href="https://github.com/ClickHouse/ClickHouse/pull/44501" target="_blank" rel="noopener noreferrer">#44501</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix IN function with LowCardinality and const column, close <a href="https://github.com/ClickHouse/ClickHouse/issues/44503" target="_blank" rel="noopener noreferrer">#44503</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44506" target="_blank" rel="noopener noreferrer">#44506</a> (<a href="https://github.com/canhld94" target="_blank" rel="noopener noreferrer">Duc Canh Le</a>).</li><li>Fixed a bug in the normalization of a <code>DEFAULT</code> expression in <code>CREATE TABLE</code> statement. The second argument of the function <code>in</code> (or the right argument of operator <code>IN</code>) might be replaced with the result of its evaluation during CREATE query execution. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44496" target="_blank" rel="noopener noreferrer">#44496</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44547" target="_blank" rel="noopener noreferrer">#44547</a> (<a href="https://github.com/tavplubix" target="_blank" rel="noopener noreferrer">Alexander Tokmakov</a>).</li><li>Projections do not work in presence of WITH ROLLUP, WITH CUBE and WITH TOTALS. In previous versions, a query produced an exception instead of skipping the usage of projections. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44614" target="_blank" rel="noopener noreferrer">#44614</a>. This closes <a href="https://github.com/ClickHouse/ClickHouse/issues/42772" target="_blank" rel="noopener noreferrer">#42772</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44615" target="_blank" rel="noopener noreferrer">#44615</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Async blocks were not cleaned because the function <code>get all blocks sorted by time</code> didn&#x27;t get async blocks. <a href="https://github.com/ClickHouse/ClickHouse/pull/44651" target="_blank" rel="noopener noreferrer">#44651</a> (<a href="https://github.com/hanfei1991" target="_blank" rel="noopener noreferrer">Han Fei</a>).</li><li>Fix <code>LOGICAL_ERROR</code> <code>The top step of the right pipeline should be ExpressionStep</code> for JOIN with subquery, UNION, and TOTALS. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/43687" target="_blank" rel="noopener noreferrer">#43687</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44673" target="_blank" rel="noopener noreferrer">#44673</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Avoid <code>std::out_of_range</code> exception in the Executable table engine. <a href="https://github.com/ClickHouse/ClickHouse/pull/44681" target="_blank" rel="noopener noreferrer">#44681</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Do not apply <code>optimize_syntax_fuse_functions</code> to quantiles on AST, close <a href="https://github.com/ClickHouse/ClickHouse/issues/44712" target="_blank" rel="noopener noreferrer">#44712</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44713" target="_blank" rel="noopener noreferrer">#44713</a> (<a href="https://github.com/vdimir" target="_blank" rel="noopener noreferrer">Vladimir C</a>).</li><li>Fix bug with wrong type in Merge table and PREWHERE, close <a href="https://github.com/ClickHouse/ClickHouse/issues/43324" target="_blank" rel="noopener noreferrer">#43324</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44716" target="_blank" rel="noopener noreferrer">#44716</a> (<a href="https://github.com/vdimir" target="_blank" rel="noopener noreferrer">Vladimir C</a>).</li><li>Fix a possible crash during shutdown (while destroying TraceCollector). Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44757" target="_blank" rel="noopener noreferrer">#44757</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44758" target="_blank" rel="noopener noreferrer">#44758</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Fix a possible crash in distributed query processing. The crash could happen if a query with totals or extremes returned an empty result and there are mismatched types in the Distributed and the local tables. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44738" target="_blank" rel="noopener noreferrer">#44738</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44760" target="_blank" rel="noopener noreferrer">#44760</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Fix fsync for fetches (<code>min_compressed_bytes_to_fsync_after_fetch</code>)/small files (ttl.txt, columns.txt) in mutations (<code>min_rows_to_fsync_after_merge</code>/<code>min_compressed_bytes_to_fsync_after_merge</code>). <a href="https://github.com/ClickHouse/ClickHouse/pull/44781" target="_blank" rel="noopener noreferrer">#44781</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>A rare race condition was possible when querying the <code>system.parts</code> or <code>system.parts_columns</code> tables in the presence of parts being moved between disks. Introduced in <a href="https://github.com/ClickHouse/ClickHouse/issues/41145" target="_blank" rel="noopener noreferrer">#41145</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44809" target="_blank" rel="noopener noreferrer">#44809</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Fix the error <code>Context has expired</code> which could appear with enabled projections optimization. Can be reproduced for queries with specific functions, like <code>dictHas/dictGet</code> which use context in runtime. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44844" target="_blank" rel="noopener noreferrer">#44844</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44850" target="_blank" rel="noopener noreferrer">#44850</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>A fix for <code>Cannot read all data</code> error which could happen while reading <code>LowCardinality</code> dictionary from remote fs. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44709" target="_blank" rel="noopener noreferrer">#44709</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44875" target="_blank" rel="noopener noreferrer">#44875</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Ignore cases when hardware monitor sensors cannot be read instead of showing a full exception message in logs. <a href="https://github.com/ClickHouse/ClickHouse/pull/44895" target="_blank" rel="noopener noreferrer">#44895</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Use <code>max_delay_to_insert</code> value in case the calculated time to delay INSERT exceeds the setting value. Related to <a href="https://github.com/ClickHouse/ClickHouse/issues/44902" target="_blank" rel="noopener noreferrer">#44902</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44916" target="_blank" rel="noopener noreferrer">#44916</a> (<a href="https://github.com/devcrafter" target="_blank" rel="noopener noreferrer">Igor Nikonov</a>).</li><li>Fix error <code>Different order of columns in UNION subquery</code> for queries with <code>UNION</code>. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/44866" target="_blank" rel="noopener noreferrer">#44866</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44920" target="_blank" rel="noopener noreferrer">#44920</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Delay for INSERT can be calculated incorrectly, which can lead to always using <code>max_delay_to_insert</code> setting as delay instead of a correct value. Using simple formula <code>max_delay_to_insert * (parts_over_threshold/max_allowed_parts_over_threshold)</code> i.e. delay grows proportionally to parts over threshold. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44902" target="_blank" rel="noopener noreferrer">#44902</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44954" target="_blank" rel="noopener noreferrer">#44954</a> (<a href="https://github.com/devcrafter" target="_blank" rel="noopener noreferrer">Igor Nikonov</a>).</li><li>Fix alter table TTL error when a wide part has the lightweight delete mask. <a href="https://github.com/ClickHouse/ClickHouse/pull/44959" target="_blank" rel="noopener noreferrer">#44959</a> (<a href="https://github.com/liangliangpan" target="_blank" rel="noopener noreferrer">Mingliang Pan</a>).</li><li>Follow-up fix for Replace domain IP types (IPv4, IPv6) with native <a href="https://github.com/ClickHouse/ClickHouse/issues/43221" target="_blank" rel="noopener noreferrer">#43221</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45024" target="_blank" rel="noopener noreferrer">#45024</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>Follow-up fix for Replace domain IP types (IPv4, IPv6) with native <a href="https://github.com/ClickHouse/ClickHouse/pull/43221" target="_blank" rel="noopener noreferrer">https://github.com/ClickHouse/ClickHouse/pull/43221</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45043" target="_blank" rel="noopener noreferrer">#45043</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>A buffer overflow was possible in the parser. Found by fuzzer. <a href="https://github.com/ClickHouse/ClickHouse/pull/45047" target="_blank" rel="noopener noreferrer">#45047</a> (<a href="https://github.com/alexey-milovidov" target="_blank" rel="noopener noreferrer">Alexey Milovidov</a>).</li><li>Fix possible cannot-read-all-data error in storage FileLog. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45051" target="_blank" rel="noopener noreferrer">#45051</a>, <a href="https://github.com/ClickHouse/ClickHouse/issues/38257" target="_blank" rel="noopener noreferrer">#38257</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45057" target="_blank" rel="noopener noreferrer">#45057</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Memory efficient aggregation (setting <code>distributed_aggregation_memory_efficient</code>) is disabled when grouping sets are present in the query. <a href="https://github.com/ClickHouse/ClickHouse/pull/45058" target="_blank" rel="noopener noreferrer">#45058</a> (<a href="https://github.com/nickitat" target="_blank" rel="noopener noreferrer">Nikita Taranov</a>).</li><li>Fix <code>RANGE_HASHED</code> dictionary to count range columns as part of the primary key during updates when <code>update_field</code> is specified. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/44588" target="_blank" rel="noopener noreferrer">#44588</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45061" target="_blank" rel="noopener noreferrer">#45061</a> (<a href="https://github.com/kitaisreal" target="_blank" rel="noopener noreferrer">Maksim Kita</a>).</li><li>Fix error <code>Cannot capture column</code> for <code>LowCardinality</code> captured argument of nested lambda. Fixes <a href="https://github.com/ClickHouse/ClickHouse/issues/45028" target="_blank" rel="noopener noreferrer">#45028</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45065" target="_blank" rel="noopener noreferrer">#45065</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Fix the wrong query result of <code>additional_table_filters</code> (additional filter was not applied) in case the minmax/count projection is used. <a href="https://github.com/ClickHouse/ClickHouse/pull/45133" target="_blank" rel="noopener noreferrer">#45133</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Fixed bug in <code>histogram</code> function accepting negative values. <a href="https://github.com/ClickHouse/ClickHouse/pull/45147" target="_blank" rel="noopener noreferrer">#45147</a> (<a href="https://github.com/rgzntrade" target="_blank" rel="noopener noreferrer">simpleton</a>).</li><li>Fix wrong column nullability in StoreageJoin, close <a href="https://github.com/ClickHouse/ClickHouse/issues/44940" target="_blank" rel="noopener noreferrer">#44940</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45184" target="_blank" rel="noopener noreferrer">#45184</a> (<a href="https://github.com/vdimir" target="_blank" rel="noopener noreferrer">Vladimir C</a>).</li><li>Fix <code>background_fetches_pool_size</code> settings reload (increase at runtime). <a href="https://github.com/ClickHouse/ClickHouse/pull/45189" target="_blank" rel="noopener noreferrer">#45189</a> (<a href="https://github.com/Algunenano" target="_blank" rel="noopener noreferrer">Raúl Marín</a>).</li><li>Correctly process <code>SELECT</code> queries on KV engines (e.g. KeeperMap, EmbeddedRocksDB) using <code>IN</code> on the key with subquery producing different type. <a href="https://github.com/ClickHouse/ClickHouse/pull/45215" target="_blank" rel="noopener noreferrer">#45215</a> (<a href="https://github.com/antonio2368" target="_blank" rel="noopener noreferrer">Antonio Andelic</a>).</li><li>Fix logical error in SEMI JOIN &amp; join_use_nulls in some cases, close <a href="https://github.com/ClickHouse/ClickHouse/issues/45163" target="_blank" rel="noopener noreferrer">#45163</a>, close <a href="https://github.com/ClickHouse/ClickHouse/issues/45209" target="_blank" rel="noopener noreferrer">#45209</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45230" target="_blank" rel="noopener noreferrer">#45230</a> (<a href="https://github.com/vdimir" target="_blank" rel="noopener noreferrer">Vladimir C</a>).</li><li>Fix heap-use-after-free in reading from s3. <a href="https://github.com/ClickHouse/ClickHouse/pull/45253" target="_blank" rel="noopener noreferrer">#45253</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix bug when the Avro Union type is <!-- -->[&#x27;null&#x27;, Nested type]<!-- -->, closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45275" target="_blank" rel="noopener noreferrer">#45275</a>. Fix bug that incorrectly infers <code>bytes</code> type to <code>Float</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45276" target="_blank" rel="noopener noreferrer">#45276</a> (<a href="https://github.com/ucasfl" target="_blank" rel="noopener noreferrer">flynn</a>).</li><li>Throw a correct exception when explicit PREWHERE cannot be used with a table using the storage engine <code>Merge</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45319" target="_blank" rel="noopener noreferrer">#45319</a> (<a href="https://github.com/antonio2368" target="_blank" rel="noopener noreferrer">Antonio Andelic</a>).</li><li>Under WSL1 Ubuntu self-extracting ClickHouse fails to decompress due to inconsistency - /proc/self/maps reporting 32bit file&#x27;s inode, while stat reporting 64bit inode. <a href="https://github.com/ClickHouse/ClickHouse/pull/45339" target="_blank" rel="noopener noreferrer">#45339</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>Fix race in Distributed table startup (that could lead to processing file of async INSERT multiple times). <a href="https://github.com/ClickHouse/ClickHouse/pull/45360" target="_blank" rel="noopener noreferrer">#45360</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Fix a possible crash while reading from storage <code>S3</code> and table function <code>s3</code> in the case when <code>ListObject</code> request has failed. <a href="https://github.com/ClickHouse/ClickHouse/pull/45371" target="_blank" rel="noopener noreferrer">#45371</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Fix <code>SELECT ... FROM system.dictionaries</code> exception when there is a dictionary with a bad structure (e.g. incorrect type in XML config). <a href="https://github.com/ClickHouse/ClickHouse/pull/45399" target="_blank" rel="noopener noreferrer">#45399</a> (<a href="https://github.com/aalexfvk" target="_blank" rel="noopener noreferrer">Aleksei Filatov</a>).</li><li>Fix s3Cluster schema inference when structure from insertion table is used in <code>INSERT INTO ... SELECT * FROM s3Cluster</code> queries. <a href="https://github.com/ClickHouse/ClickHouse/pull/45422" target="_blank" rel="noopener noreferrer">#45422</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fix bug in JSON/BSONEachRow parsing with HTTP that could lead to using default values for some columns instead of values from data. <a href="https://github.com/ClickHouse/ClickHouse/pull/45424" target="_blank" rel="noopener noreferrer">#45424</a> (<a href="https://github.com/Avogar" target="_blank" rel="noopener noreferrer">Kruglov Pavel</a>).</li><li>Fixed bug (Code: 632. DB::Exception: Unexpected data ... after parsed IPv6 value ...) with typed parsing of IP types from text source. <a href="https://github.com/ClickHouse/ClickHouse/pull/45425" target="_blank" rel="noopener noreferrer">#45425</a> (<a href="https://github.com/yakov-olkhovskiy" target="_blank" rel="noopener noreferrer">Yakov Olkhovskiy</a>).</li><li>close <a href="https://github.com/ClickHouse/ClickHouse/issues/45297" target="_blank" rel="noopener noreferrer">#45297</a> Add check for empty regular expressions. <a href="https://github.com/ClickHouse/ClickHouse/pull/45428" target="_blank" rel="noopener noreferrer">#45428</a> (<a href="https://github.com/hanfei1991" target="_blank" rel="noopener noreferrer">Han Fei</a>).</li><li>Fix possible (likely distributed) query hung. <a href="https://github.com/ClickHouse/ClickHouse/pull/45448" target="_blank" rel="noopener noreferrer">#45448</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Fix possible deadlock with <code>allow_asynchronous_read_from_io_pool_for_merge_tree</code> enabled in case of exception from <code>ThreadPool::schedule</code>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45481" target="_blank" rel="noopener noreferrer">#45481</a> (<a href="https://github.com/KochetovNicolai" target="_blank" rel="noopener noreferrer">Nikolai Kochetov</a>).</li><li>Fix possible in-use table after DETACH. <a href="https://github.com/ClickHouse/ClickHouse/pull/45493" target="_blank" rel="noopener noreferrer">#45493</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Fix rare abort in the case when a query is canceled and parallel parsing was used during its execution. <a href="https://github.com/ClickHouse/ClickHouse/pull/45498" target="_blank" rel="noopener noreferrer">#45498</a> (<a href="https://github.com/CurtizJ" target="_blank" rel="noopener noreferrer">Anton Popov</a>).</li><li>Fix a race between Distributed table creation and INSERT into it (could lead to CANNOT_LINK during INSERT into the table). <a href="https://github.com/ClickHouse/ClickHouse/pull/45502" target="_blank" rel="noopener noreferrer">#45502</a> (<a href="https://github.com/azat" target="_blank" rel="noopener noreferrer">Azat Khuzhin</a>).</li><li>Add proper default (SLRU) to cache policy getter. Closes <a href="https://github.com/ClickHouse/ClickHouse/issues/45514" target="_blank" rel="noopener noreferrer">#45514</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/45524" target="_blank" rel="noopener noreferrer">#45524</a> (<a href="https://github.com/kssenii" target="_blank" rel="noopener noreferrer">Kseniia Sumarokova</a>).</li><li>Disallow array join in mutations closes <a href="https://github.com/ClickHouse/ClickHouse/issues/42637" target="_blank" rel="noopener noreferrer">#42637</a> <a href="https://github.com/ClickHouse/ClickHouse/pull/44447" target="_blank" rel="noopener noreferrer">#44447</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li><li>Fix for qualified asterisks with alias table name and column transformer. Resolves <a href="https://github.com/ClickHouse/ClickHouse/issues/44736" target="_blank" rel="noopener noreferrer">#44736</a>. <a href="https://github.com/ClickHouse/ClickHouse/pull/44755" target="_blank" rel="noopener noreferrer">#44755</a> (<a href="https://github.com/SmitaRKulkarni" target="_blank" rel="noopener noreferrer">SmitaRKulkarni</a>).</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="changelog-for-2022"><a href="https://clickhouse.com/docs/en/whats-new/changelog/2022" target="_blank" rel="noopener noreferrer">Changelog for 2022</a><a href="#changelog-for-2022" class="hash-link" aria-label="Direct link to changelog-for-2022" title="Direct link to changelog-for-2022">​</a></h2></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/whats-new/changelog/index.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/cloud"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Cloud</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/AlgoliaDocsSelfCrawl/en/whats-new/changelog/2022"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">2022</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#-clickhouse-release-232-2023-02-23" class="table-of-contents__link toc-highlight"><a id="232"></a> ClickHouse release 23.2, 2023-02-23</a></li><li><a href="#-clickhouse-release-231-2023-01-26" class="table-of-contents__link toc-highlight"><a id="231"></a> ClickHouse release 23.1, 2023-01-26</a></li><li><a href="#clickhouse-release-231" class="table-of-contents__link toc-highlight">ClickHouse release 23.1</a></li><li><a href="#changelog-for-2022" class="table-of-contents__link toc-highlight">Changelog for 2022</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ClickHouse</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://clickhouse.com/cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ClickHouse as a Service</a></li><li class="footer__item"><a href="https://clickhouse.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://clickhouse.com/learn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn ClickHouse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ClickHouse/ClickHouse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://clickhouse.com/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.meetup.com/pro/clickhouse/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meetup<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/clickhousedb/shared_invite/zt-rxm3rdrk-lIUmhLC3V8WTaL0TGxsOmg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Policies</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://clickhouse.com/legal/trademark-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/AlgoliaDocsSelfCrawl/img/logo_without_text.svg" alt="ClickHouse Documentation" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/AlgoliaDocsSelfCrawl/img/logo_without_text.svg" alt="ClickHouse Documentation" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright &copy; 2016&ndash;2023 ClickHouse, Inc. ClickHouse Docs provided under the Creative Commons CC BY-NC-SA 4.0 license. ClickHouse&reg; is a registered trademark of ClickHouse, Inc.</div></div></div></footer></div>
<script src="/AlgoliaDocsSelfCrawl/assets/js/runtime~main.be802059.js"></script>
<script src="/AlgoliaDocsSelfCrawl/assets/js/main.b00bfaaf.js"></script>
</body>
</html>