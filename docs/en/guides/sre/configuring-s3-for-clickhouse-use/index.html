<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-en/integrations/data-ingestion/s3/configuring-s3-for-clickhouse-use">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.0">
<title data-rh="true">Use S3 Object Storage as a ClickHouse disk | ClickHouse Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/img/logo.png"><meta data-rh="true" name="twitter:image" content="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/img/logo.png"><meta data-rh="true" property="og:url" content="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/en/guides/sre/configuring-s3-for-clickhouse-use"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Use S3 Object Storage as a ClickHouse disk | ClickHouse Docs"><meta data-rh="true" name="description" content="Configure AWS IAM user, create an S3 bucket, and use that bucket as a ClickHouse disk."><meta data-rh="true" property="og:description" content="Configure AWS IAM user, create an S3 bucket, and use that bucket as a ClickHouse disk."><link data-rh="true" rel="icon" href="/AlgoliaDocsSelfCrawl/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/en/guides/sre/configuring-s3-for-clickhouse-use"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/en/guides/sre/configuring-s3-for-clickhouse-use" hreflang="en"><link data-rh="true" rel="alternate" href="https://danroscigno.github.io/AlgoliaDocsSelfCrawl/en/guides/sre/configuring-s3-for-clickhouse-use" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://R7FRLK17BE-dsn.algolia.net" crossorigin="anonymous"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-KF1LLRTQ5Q"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-KF1LLRTQ5Q",{})</script>


<link rel="search" type="application/opensearchdescription+xml" title="ClickHouse Docs" href="/AlgoliaDocsSelfCrawl/opensearch.xml">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.24/dist/katex.min.css" integrity="sha384-odtC+0UGzzFL/6PNoE8rX/SPcQDXBJ+uRepguP4QkPCm2LBxH3FA3y+fKSiJ+AmM" crossorigin="anonymous">
<script src="/docs/js/analytics.js"></script><link rel="stylesheet" href="/AlgoliaDocsSelfCrawl/assets/css/styles.211c0942.css">
<link rel="preload" href="/AlgoliaDocsSelfCrawl/assets/js/runtime~main.18c4838b.js" as="script">
<link rel="preload" href="/AlgoliaDocsSelfCrawl/assets/js/main.745be0d0.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/AlgoliaDocsSelfCrawl/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--light_HNdA"><img src="/AlgoliaDocsSelfCrawl/img/logo_without_text.svg" alt="ClickHouse" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">ClickHouse</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Product</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Cloud</a></li><li><a href="https://clickhouse.com/clickhouse" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Open Source</a></li></ul></div><a href="https://clickhouse.com/customer-stories" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Use Cases</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Company</a><ul class="dropdown__menu"><li><a href="https://clickhouse.com/blog" target="_blank" rel="noopener noreferrer" class="dropdown__link">Blog</a></li><li><a href="https://clickhouse.com/company/our-story" target="_blank" rel="noopener noreferrer" class="dropdown__link">Our story</a></li><li><a href="https://clickhouse.com/company/careers" target="_blank" rel="noopener noreferrer" class="dropdown__link">Careers</a></li><li><a href="https://clickhouse.com/company/contact" target="_blank" rel="noopener noreferrer" class="dropdown__link">Contact us</a></li><li><a href="https://clickhouse.com/company/news-events" target="_blank" rel="noopener noreferrer" class="dropdown__link">News and events</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link ch-menu">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/AlgoliaDocsSelfCrawl/en/intro">Docs</a></li><li><a href="https://clickhouse.com/learn" target="_blank" rel="noopener noreferrer" class="dropdown__link">ClickHouse Academy</a></li></ul></div><a href="https://clickhouse.com/pricing" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link ch-menu">Pricing</a></div><div class="navbar__items navbar__items--right"><a href="https://clickhouse.cloud/signUp" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-signup-button">Try for Free<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Language</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/AlgoliaDocsSelfCrawl/en/intro">English</a></li></ul></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><main class="docMainContainer_gTbr docMainContainerEnhanced_Uz_u"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Use S3 Object Storage as a ClickHouse disk</h1><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>This page is not applicable to <a href="https://clickhouse.com/cloud" target="_blank" rel="noopener noreferrer">ClickHouse Cloud</a>. The feature documented here is not available in ClickHouse Cloud services.
See the ClickHouse <a href="/AlgoliaDocsSelfCrawl/docs/en/whats-new/cloud-compatibility">Cloud Compatibility</a> guide for more information.</p></div></div><p>This article demonstrates the basics of how to configure an AWS IAM user, create an S3 bucket and configure ClickHouse to use the bucket as an S3 disk.
You should work with your security team to determine the permissions to be used, and consider these as a starting point.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-aws-iam-user">Create an AWS IAM user<a href="#create-an-aws-iam-user" class="hash-link" aria-label="Direct link to Create an AWS IAM user" title="Direct link to Create an AWS IAM user">​</a></h2><p>In this procedure, we&#x27;ll be creating a service account user, not a login user.</p><ol><li><p>Log into the AWS IAM Management Console.</p></li><li><p>In &quot;users&quot;, select <strong>Add users</strong></p><p><img loading="lazy" alt="create_iam_user_0" src="/AlgoliaDocsSelfCrawl/assets/images/s3-1-03bea40f47bb9ae0f8a38b921fb5fc65.png" width="1493" height="307" class="img_ev3q"></p></li><li><p>Enter the user name and set the credential type to <strong>Access key - Programmatic access</strong> and select <strong>Next: Permissions</strong></p><p><img loading="lazy" alt="create_iam_user_1" src="/AlgoliaDocsSelfCrawl/assets/images/s3-2-d1769946c5baf28dec5266388f46ca6d.png" width="984" height="556" class="img_ev3q"></p></li><li><p>Do not add the user to any group; select <strong>Next: Tags</strong></p><p><img loading="lazy" alt="create_iam_user_2" src="/AlgoliaDocsSelfCrawl/assets/images/s3-3-e687a417d48603c3a1a4c456639691e6.png" width="999" height="557" class="img_ev3q"></p></li><li><p>Unless you need to add any tags, select <strong>Next: Review</strong></p><p><img loading="lazy" alt="create_iam_user_3" src="/AlgoliaDocsSelfCrawl/assets/images/s3-4-8bc97d7d71749ecca4b0ca006ec3e659.png" width="983" height="386" class="img_ev3q"></p></li><li><p>Select <strong>Create User</strong></p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The warning message stating that the user has no permissions can be ignored; permissions will be granted on the bucket for the user in the next section</p></div></div><p>  <img loading="lazy" alt="create_iam_user_4" src="/AlgoliaDocsSelfCrawl/assets/images/s3-5-d9258893409b46a1cceeb1fb26938d3a.png" width="987" height="581" class="img_ev3q"></p></li><li><p>The user is now created; click on <strong>show</strong> and copy the access and secret keys.</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>Save the keys somewhere else; this is the only time that the secret access key will be available.</p></div></div><p>  <img loading="lazy" alt="create_iam_user_5" src="/AlgoliaDocsSelfCrawl/assets/images/s3-6-0f6f4bbe29c6b238875fe1b0e28f6764.png" width="983" height="576" class="img_ev3q"></p></li><li><p>Click close, then find the user in the users screen.</p><p><img loading="lazy" alt="create_iam_user_6" src="data:image/png;base64,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UC6r76tQvrq/Xt+cOq58P+bJ5LXgk6LExESTYjYzh7BsRk+XMlPHwyhzr3NhmIxh0eZTaP/+FtM8zh/inJzZllChF8nTGF4XfSTOvEvI3te2bsl0c4TsfWwPw9b+/M89aDxsvdnMsLrZVqrrcMsDNbXnY/jPz/ZgwKep6YIZ2jbSSh/OOn0Z02h3sNKJj7TShfOHiSLYLoo0f+djyu/YuGSTMY/103M0tmtNVLPC53Yev+rrlNouAtmSAFMPuxtfjMlUw8woR2OcNTN1jR492mSP47aiRYua7HJMkZyRMeV2/vz5zXuQRo4c6XqhJiehM+uXLDQJMGTOU/xwnWLJV4Y5z/C6rJDxHNN2XfZ2ZlBkmnl6cvhD45wivsSRxr8BJhixxUyTJk0QGRlpxL0p4OcX5ytxvNPrSmOqewqhhQsXol27dnj//fcxatQo88MHDjz3pk2bTEgqy/trH8s41exraPdf31c2CX1mhYDGFZDDShLACKv7Nk7ajImJcaWl9VcRBRGfEhUvHnppmq0oNPOOn7zhuVAwby6DgimqIwvlscIHvJO5npwChqMVzhfuOsZ7ydStPMdFK+SN85UoijznODE1OMP4IgvnyXSSA56f9fB9R57m73wMvWN7fL0LybM+rYtAsBNgSBGfgjPE6H4sPj7ePBhieJAstAlQ/FAI+TMKpaENej2U0DnPtnAs8/94REREOsHD24MLFy6YhwL3M175LiJmbSxWrJgROwyPo/eI60zHXbduXZPCng8OKND4niR6YJm+27aM2meX0advAvq+8s1Ge+6fQKiOqyyLovtHqiNFQAREQAREIPQJuKfj9uwtBRG9Sk6zl19+2XSZ8+z4hHr27Nlmnh7D+e5HgDmNn/orAiIQeAISRYFnqhpFQAREQAREIB0Beo7sdxgxy5znvKN0B4TwBiYqmTZtGvbs2WN6ydThFEiV7yYlCeGuq2siIALZlIBEUTa9MGqWCIiACIiACIiACIiACIjAwyGQdnbxwzmnziICIiACIiACIiACIiACIiAC2YZA+pn12aZpaogIiIAIiIAIBB+BNm3auBodFRVllrUNCDQDF2QtiIAIiEAACCh8LgAQVYUIiIAIiIAIiIAIiIAIiEDwElD4XPBeO7VcBERABERABERABERABEQgAAQkigIAUVWIgAiIgAiIgAiIgAiIgAgELwGJouC9dmq5CIiACIiACIiACIiACIhAAAhIFAUAoqoQAREQAREQAREQAREQAREIXgISRcF77dRyERABERABERABERABERCBABCQKAoARFUhAiIgAiIgAiIgAiIgAiIQvAQkioL32qnlIiACIiACIiACIiACIiACASAQFh0dHYBqVIUIiIAIiIAIiIAIiIAIiIAIBCcBvbw1OK+bWi0CIiACIiACIiACIiACIhAgAgqfCxBIVSMCIiACIiACIiACIiACIhCcBCSKgvO6qdUiIAIiIAIiIAIiIAIiIAIBIiBRFCCQqkYEREAEREAEREAEREAERCA4CUgUBed1U6tFQAREQAREQAREQAREQAQCRECiKEAgVY0IiIAIiIAIiIAIiIAIiEBwEvh/+v/MlF2Dy9gAAAAASUVORK5CYII=" width="837" height="54" class="img_ev3q"></p></li><li><p>Copy the ARN (Amazon Resource Name) and save it for use when configuring the access policy for the bucket.</p><p><img loading="lazy" alt="create_iam_user_7" src="/AlgoliaDocsSelfCrawl/assets/images/s3-8-629425bf3160cfe75e44876e5c71eb8b.png" width="595" height="265" class="img_ev3q"></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-an-s3-bucket">Create an S3 bucket<a href="#create-an-s3-bucket" class="hash-link" aria-label="Direct link to Create an S3 bucket" title="Direct link to Create an S3 bucket">​</a></h2><ol><li><p>In the S3 bucket section, select <strong>Create bucket</strong></p><p><img loading="lazy" alt="create_s3_bucket_0" src="/AlgoliaDocsSelfCrawl/assets/images/s3-9-4aa76542e482dff3894ec423231dd1b0.png" width="1465" height="326" class="img_ev3q"></p></li><li><p>Enter a bucket name, leave other options default</p><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The bucket name must be unique across AWS, not just the organization, or it will emit an error.</p></div></div></li><li><p>Leave <code>Block all Public Access</code> enabled; public access is not needed.</p><p><img loading="lazy" alt="create_s3_bucket_2" src="/AlgoliaDocsSelfCrawl/assets/images/s3-a-0e6dc95b7af088e0bd74a31fbef15076.png" width="841" height="754" class="img_ev3q"></p></li><li><p>Select <strong>Create Bucket</strong> at the bottom of the page</p><p><img loading="lazy" alt="create_s3_bucket_3" src="/AlgoliaDocsSelfCrawl/assets/images/s3-b-63b4e2c1dae1494a8abbb0298c70d606.png" width="826" height="132" class="img_ev3q"></p></li><li><p>Select the link, copy the ARN, and save it for use when configuring the access policy for the bucket.</p></li><li><p>Once the bucket has been created, find the new S3 bucket in the S3 buckets list and select the link</p><p><img loading="lazy" alt="create_s3_bucket_4" src="/AlgoliaDocsSelfCrawl/assets/images/s3-c-2d809bd0ea2cd6138cd8ec16a07b29f1.png" width="1088" height="56" class="img_ev3q"></p></li><li><p>Select <strong>Create folder</strong></p><p><img loading="lazy" alt="create_s3_bucket_5" src="/AlgoliaDocsSelfCrawl/assets/images/s3-d-8b4bb75da064d5d60ccb01b78026b4b2.png" width="1134" height="448" class="img_ev3q"></p></li><li><p>Enter a folder name that will be the target for the ClickHouse S3 disk and select <strong>Create folder</strong></p><p><img loading="lazy" alt="create_s3_bucket_6" src="/AlgoliaDocsSelfCrawl/assets/images/s3-e-3d5076dfc4d904eb6e1df91fd5a7f540.png" width="853" height="788" class="img_ev3q"></p></li><li><p>The folder should now be visible on the bucket list</p><p><img loading="lazy" alt="create_s3_bucket_7" src="/AlgoliaDocsSelfCrawl/assets/images/s3-f-d6312cc21827dfaaf0177e642286bec0.png" width="1207" height="569" class="img_ev3q"></p></li><li><p>Select the checkbox for the new folder and click on <strong>Copy URL</strong> Save the URL copied to be used in the ClickHouse storage configuration in the next section.</p><p><img loading="lazy" alt="create_s3_bucket_8" src="/AlgoliaDocsSelfCrawl/assets/images/s3-g-fc09549f49847b6c59c04123a76baae6.png" width="1200" height="569" class="img_ev3q"></p></li><li><p>Select the <strong>Permissions</strong> tab and click on the <strong>Edit</strong> button in the <strong>Bucket Policy</strong> section</p><p><img loading="lazy" alt="create_s3_bucket_9" src="/AlgoliaDocsSelfCrawl/assets/images/s3-h-bfc7b2b7bfd8dac081ed4a10b34a9e03.png" width="1176" height="762" class="img_ev3q"></p></li><li><p>Add a bucket policy, example below:</p></li></ol><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;Version&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;2012-10-17&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;Id&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Policy123456&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token property">&quot;Statement&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token property">&quot;Sid&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;abc123&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token property">&quot;Effect&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;Allow&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token property">&quot;Principal&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token property">&quot;AWS&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;arn:aws:iam::921234567898:user/mars-s3-user&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token property">&quot;Action&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;s3:*&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token property">&quot;Resource&quot;</span><span class="token operator" style="color:rgb(0, 0, 0)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(4, 81, 165)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;arn:aws:s3:::mars-doc-test&quot;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">                </span><span class="token string" style="color:rgb(163, 21, 21)">&quot;arn:aws:s3:::mars-doc-test/*&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(4, 81, 165)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token punctuation" style="color:rgb(4, 81, 165)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><table><thead><tr><th>Parameter</th><th>Description</th><th>Example Value</th></tr></thead><tbody><tr><td>Version</td><td>Version of the policy interpreter, leave as-is</td><td>2012-10-17</td></tr><tr><td>Sid</td><td>User-defined policy id</td><td>abc123</td></tr><tr><td>Effect</td><td>Whether user requests will be allowed or denied</td><td>Allow</td></tr><tr><td>Principal</td><td>The accounts or user that will be allowed</td><td>arn:aws:iam::921234567898:user/mars-s3-user</td></tr><tr><td>Action</td><td>What operations are allowed on the bucket</td><td>s3:*</td></tr><tr><td>Resource</td><td>Which resources in the bucket will operations be allowed in</td><td>&quot;arn:aws:s3:::mars-doc-test&quot;, &quot;arn:aws:s3:::mars-doc-test/*&quot;</td></tr></tbody></table><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>You should work with your security team to determine the permissions to be used, consider these as a starting point.
For more information on Policies and settings, refer to AWS documentation:
<a href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-policy-language-overview.html" target="_blank" rel="noopener noreferrer">https://docs.aws.amazon.com/AmazonS3/latest/userguide/access-policy-language-overview.html</a></p></div></div><ol start="13"><li>Save the policy configuration.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="configure-clickhouse-to-use-the-s3-bucket-as-a-disk">Configure ClickHouse to use the S3 bucket as a disk<a href="#configure-clickhouse-to-use-the-s3-bucket-as-a-disk" class="hash-link" aria-label="Direct link to Configure ClickHouse to use the S3 bucket as a disk" title="Direct link to Configure ClickHouse to use the S3 bucket as a disk">​</a></h2><p>The following example is based on a Linux Deb package installed as a service with default ClickHouse directories.</p><ol><li>Create a new file in the ClickHouse <code>config.d</code> directory to store the storage configuration.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">vim</span><span class="token plain"> /etc/clickhouse-server/config.d/storage_config.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Add the following for storage configuration; substituting the bucket path, access key and secret keys from earlier steps</li></ol><div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">clickhouse</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">storage_configuration</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">disks</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">s3_disk</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">s3</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">endpoint</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">https://mars-doc-test.s3.amazonaws.com/clickhouse3/</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">endpoint</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">access_key_id</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">ABC123</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">access_key_id</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">secret_access_key</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">Abc+123</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">secret_access_key</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">metadata_path</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">/var/lib/clickhouse/disks/s3_disk/</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">metadata_path</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">s3_disk</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">s3_cache</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">cache</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">type</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">disk</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">s3_disk</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">disk</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">path</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">/var/lib/clickhouse/disks/s3_cache/</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">path</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">max_size</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">10Gi</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">max_size</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">s3_cache</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">disks</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">policies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">s3_main</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">volumes</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">main</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;</span><span class="token tag" style="color:rgb(128, 0, 0)">disk</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain">s3_disk</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">disk</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">          </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">main</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">volumes</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">s3_main</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">policies</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">storage_configuration</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&lt;/</span><span class="token tag" style="color:rgb(128, 0, 0)">clickhouse</span><span class="token tag punctuation" style="color:rgb(4, 81, 165)">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="theme-admonition theme-admonition-note alert alert--secondary admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_S0QG"><p>The tags <code>s3_disk</code> and <code>s3_cache</code> within the <code>&lt;disks&gt;</code> tag are arbitrary labels. These can be set to something else but the same label must be used in the <code>&lt;disk&gt;</code> tab under the <code>&lt;policies&gt;</code> tab to reference the disk.
The <code>&lt;S3_main&gt;</code> tag is also arbitrary and is the name of the policy which will be used as the identifier storage target when creating resources in ClickHouse.</p><p>The configuration shown above is for ClickHouse version 22.8 or higher, if you are using an older version please see the <a href="/AlgoliaDocsSelfCrawl/docs/en/operations/storing-data.md/#using-local-cache">storing data</a> docs.</p><p>For more information about using S3:
Integrations Guide: <a href="/AlgoliaDocsSelfCrawl/en/integrations/s3/s3-merge-tree">S3 Backed MergeTree</a></p></div></div><ol start="3"><li>Update the owner of the file to the <code>clickhouse</code> user and group</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">chown</span><span class="token plain"> clickhouse:clickhouse /etc/clickhouse-server/config.d/storage_config.xml</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Restart the ClickHouse instance to have the changes take effect.</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token function" style="color:rgb(0, 0, 255)">service</span><span class="token plain"> clickhouse-server restart</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing">​</a></h2><ol><li>Log in with the ClickHouse client, something like the following</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">clickhouse-client --user default --password ClickHouse123</span><span class="token operator" style="color:rgb(0, 0, 0)">!</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Create a table specifying the new S3 storage policy</li></ol><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> s3_table1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">               </span><span class="token identifier punctuation" style="color:rgb(4, 81, 165)">`</span><span class="token identifier">id</span><span class="token identifier punctuation" style="color:rgb(4, 81, 165)">`</span><span class="token plain"> UInt64</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">               </span><span class="token identifier punctuation" style="color:rgb(4, 81, 165)">`</span><span class="token identifier">column1</span><span class="token identifier punctuation" style="color:rgb(4, 81, 165)">`</span><span class="token plain"> String</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           </span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           </span><span class="token keyword" style="color:rgb(0, 0, 255)">ENGINE</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> MergeTree</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           </span><span class="token keyword" style="color:rgb(0, 0, 255)">ORDER</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">BY</span><span class="token plain"> id</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           SETTINGS storage_policy </span><span class="token operator" style="color:rgb(0, 0, 0)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;s3_main&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="3"><li>Show that the table was created with the correct policy</li></ol><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SHOW</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">CREATE</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">TABLE</span><span class="token plain"> s3_table1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-response codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">┌─statement────────────────────────────────────────────────────</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│ CREATE TABLE default.s3_table1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">(</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    `id` UInt64,</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">    `column1` String</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">)</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ENGINE = MergeTree</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">ORDER BY id</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">SETTINGS storage_policy = &#x27;s3_main&#x27;, index_granularity = 8192</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└──────────────────────────────────────────────────────────────</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="4"><li>Insert test rows into the table</li></ol><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">INSERT</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">INTO</span><span class="token plain"> s3_table1</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token plain">id</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> column1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           </span><span class="token keyword" style="color:rgb(0, 0, 255)">VALUES</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;abc&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">           </span><span class="token punctuation" style="color:rgb(4, 81, 165)">(</span><span class="token number" style="color:rgb(9, 134, 88)">2</span><span class="token punctuation" style="color:rgb(4, 81, 165)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(163, 21, 21)">&#x27;xyz&#x27;</span><span class="token punctuation" style="color:rgb(4, 81, 165)">)</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-response codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">INSERT INTO s3_table1 (id, column1) FORMAT Values</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Query id: 0265dd92-3890-4d56-9d12-71d4038b85d5</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">Ok.</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">2 rows in set. Elapsed: 0.337 sec.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="5"><li>View the rows</li></ol><div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token keyword" style="color:rgb(0, 0, 255)">SELECT</span><span class="token plain"> </span><span class="token operator" style="color:rgb(0, 0, 0)">*</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(0, 0, 255)">FROM</span><span class="token plain"> s3_table1</span><span class="token punctuation" style="color:rgb(4, 81, 165)">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><div class="language-response codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#000000;--prism-background-color:#ffffff"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-response codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#000000"><span class="token plain">┌─id─┬─column1─┐</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│  1 │ abc     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">│  2 │ xyz     │</span><br></span><span class="token-line" style="color:#000000"><span class="token plain">└────┴─────────┘</span><br></span><span class="token-line" style="color:#000000"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#000000"><span class="token plain">2 rows in set. Elapsed: 0.284 sec.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="6"><li><p>In the AWS console, navigate to the buckets, and select the new one and the folder.
You should see something like the following:</p><p>  <img loading="lazy" alt="create_s3_bucket_10" src="/AlgoliaDocsSelfCrawl/assets/images/s3-j-5dcc986c9002270f2d67ba97e8d7474e.png" width="1208" height="736" class="img_ev3q"></p></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary">Summary<a href="#summary" class="hash-link" aria-label="Direct link to Summary" title="Direct link to Summary">​</a></h2><p>This article provided simple step-by-step instructions on configuring an AWS S3 bucket for access and use as a disk for ClickHouse.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/integrations/data-ingestion/s3/configuring-s3-for-clickhouse-use.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-an-aws-iam-user" class="table-of-contents__link toc-highlight">Create an AWS IAM user</a></li><li><a href="#create-an-s3-bucket" class="table-of-contents__link toc-highlight">Create an S3 bucket</a></li><li><a href="#configure-clickhouse-to-use-the-s3-bucket-as-a-disk" class="table-of-contents__link toc-highlight">Configure ClickHouse to use the S3 bucket as a disk</a></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li><li><a href="#summary" class="table-of-contents__link toc-highlight">Summary</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">ClickHouse</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://clickhouse.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Company</a></li><li class="footer__item"><a href="https://clickhouse.com/cloud/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ClickHouse as a Service</a></li><li class="footer__item"><a href="https://clickhouse.com/careers/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Careers</a></li><li class="footer__item"><a href="https://clickhouse.com/learn/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Learn ClickHouse</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ClickHouse/ClickHouse" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://clickhouse.com/blog/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.meetup.com/pro/clickhouse/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Meetup<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/c/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/ClickHouseDB" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/clickhousedb/shared_invite/zt-rxm3rdrk-lIUmhLC3V8WTaL0TGxsOmg" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Policies</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://clickhouse.com/legal/trademark-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademark Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/privacy-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://clickhouse.com/legal/cookie-policy/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Cookie Policy</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/AlgoliaDocsSelfCrawl/img/logo_without_text.svg" alt="ClickHouse Documentation" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/AlgoliaDocsSelfCrawl/img/logo_without_text.svg" alt="ClickHouse Documentation" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright &copy; 2016&ndash;2023 ClickHouse, Inc. ClickHouse Docs provided under the Creative Commons CC BY-NC-SA 4.0 license. ClickHouse&reg; is a registered trademark of ClickHouse, Inc.</div></div></div></footer></div>
<script src="/AlgoliaDocsSelfCrawl/assets/js/runtime~main.18c4838b.js"></script>
<script src="/AlgoliaDocsSelfCrawl/assets/js/main.745be0d0.js"></script>
</body>
</html>