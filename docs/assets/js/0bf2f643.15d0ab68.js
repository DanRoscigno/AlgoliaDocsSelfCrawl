"use strict";(self.webpackChunkclickhouse_docs_2_3_0=self.webpackChunkclickhouse_docs_2_3_0||[]).push([[45086],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},p="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),p=c(n),d=a,m=p["".concat(s,".").concat(d)]||p[d]||f[d]||i;return n?r.createElement(m,l(l({ref:t},u),{},{components:n})):r.createElement(m,l({ref:t},u))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[p]="string"==typeof e?e:a,l[1]=o;for(var c=2;c<i;c++)l[c]=n[c];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5264:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>f,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var r=n(87462),a=(n(67294),n(3905));const i={slug:"/en/sql-reference/table-functions/input",sidebar_position:46,sidebar_label:"input"},l="input",o={unversionedId:"en/sql-reference/table-functions/input",id:"en/sql-reference/table-functions/input",title:"input",description:"input(structure) - table function that allows effectively convert and insert data sent to the",source:"@site/docs/en/sql-reference/table-functions/input.md",sourceDirName:"en/sql-reference/table-functions",slug:"/en/sql-reference/table-functions/input",permalink:"/AlgoliaDocsSelfCrawl/en/sql-reference/table-functions/input",draft:!1,editUrl:"https://github.com/ClickHouse/ClickHouse/tree/master/docs/en/sql-reference/table-functions/input.md",tags:[],version:"current",sidebarPosition:46,frontMatter:{slug:"/en/sql-reference/table-functions/input",sidebar_position:46,sidebar_label:"input"},sidebar:"english",previous:{title:"s3",permalink:"/AlgoliaDocsSelfCrawl/en/sql-reference/table-functions/s3"},next:{title:"generateRandom",permalink:"/AlgoliaDocsSelfCrawl/en/sql-reference/table-functions/generate"}},s={},c=[],u={toc:c},p="wrapper";function f(e){let{components:t,...n}=e;return(0,a.kt)(p,(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"input"},"input"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"input(structure)")," - table function that allows effectively convert and insert data sent to the\nserver with given structure to the table with another structure."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"structure")," - structure of data sent to the server in following format ",(0,a.kt)("inlineCode",{parentName:"p"},"'column1_name column1_type, column2_name column2_type, ...'"),".\nFor example, ",(0,a.kt)("inlineCode",{parentName:"p"},"'id UInt32, name String'"),"."),(0,a.kt)("p",null,"This function can be used only in ",(0,a.kt)("inlineCode",{parentName:"p"},"INSERT SELECT")," query and only once but otherwise behaves like ordinary table function\n(for example, it can be used in subquery, etc.)."),(0,a.kt)("p",null,"Data can be sent in any way like for ordinary ",(0,a.kt)("inlineCode",{parentName:"p"},"INSERT")," query and passed in any available ",(0,a.kt)("a",{parentName:"p",href:"/AlgoliaDocsSelfCrawl/en/interfaces/formats#formats"},"format"),"\nthat must be specified in the end of query (unlike ordinary ",(0,a.kt)("inlineCode",{parentName:"p"},"INSERT SELECT"),")."),(0,a.kt)("p",null,"The main feature of this function is that when server receives data from client it simultaneously converts it\naccording to the list of expressions in the ",(0,a.kt)("inlineCode",{parentName:"p"},"SELECT")," clause and inserts into the target table. Temporary table\nwith all transferred data is not created."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Examples")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Let the ",(0,a.kt)("inlineCode",{parentName:"li"},"test")," table has the following structure ",(0,a.kt)("inlineCode",{parentName:"li"},"(a String, b String)"),"\nand data in ",(0,a.kt)("inlineCode",{parentName:"li"},"data.csv")," has a different structure ",(0,a.kt)("inlineCode",{parentName:"li"},"(col1 String, col2 Date, col3 Int32)"),". Query for insert\ndata from the ",(0,a.kt)("inlineCode",{parentName:"li"},"data.csv")," into the ",(0,a.kt)("inlineCode",{parentName:"li"},"test")," table with simultaneous conversion looks like this:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"$ cat data.csv | clickhouse-client --query=\"INSERT INTO test SELECT lower(col1), col3 * col3 FROM input('col1 String, col2 Date, col3 Int32') FORMAT CSV\";\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"If ",(0,a.kt)("inlineCode",{parentName:"li"},"data.csv")," contains data of the same structure ",(0,a.kt)("inlineCode",{parentName:"li"},"test_structure")," as the table ",(0,a.kt)("inlineCode",{parentName:"li"},"test")," then these two queries are equal:")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'$ cat data.csv | clickhouse-client --query="INSERT INTO test FORMAT CSV"\n$ cat data.csv | clickhouse-client --query="INSERT INTO test SELECT * FROM input(\'test_structure\') FORMAT CSV"\n')))}f.isMDXComponent=!0}}]);