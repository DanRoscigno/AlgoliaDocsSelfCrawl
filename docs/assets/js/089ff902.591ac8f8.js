"use strict";(self.webpackChunkclickhouse_docs_2_3_0=self.webpackChunkclickhouse_docs_2_3_0||[]).push([[43072],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>k});var n=a(67294);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function r(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var l=n.createContext({}),c=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},u=function(e){var t=c(e.components);return n.createElement(l.Provider,{value:t},e.children)},p="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=r(e,["components","mdxType","originalType","parentName"]),p=c(a),m=o,k=p["".concat(l,".").concat(m)]||p[m]||d[m]||i;return a?n.createElement(k,s(s({ref:t},u),{},{components:a})):n.createElement(k,s({ref:t},u))}));function k(e,t){var a=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=a.length,s=new Array(i);s[0]=m;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r[p]="string"==typeof e?e:o,s[1]=r;for(var c=2;c<i;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},67740:(e,t,a)=>{a.d(t,{ZP:()=>r});var n=a(87462),o=(a(67294),a(3905));const i={toc:[]},s="wrapper";function r(e){let{components:t,...r}=e;return(0,o.kt)(s,(0,n.Z)({},i,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"To connect to ClickHouse with HTTP(S) you need this information:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The HOST and PORT: typically, the port is 8443 when using TLS or 8123 when not using TLS.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The DATABASE NAME: out of the box, there is a database named ",(0,o.kt)("inlineCode",{parentName:"p"},"default"),", use the name of the database that you want to connect to.")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("p",{parentName:"li"},"The USERNAME and PASSWORD: out of the box, the username is ",(0,o.kt)("inlineCode",{parentName:"p"},"default"),". Use the username appropriate for your use case."))),(0,o.kt)("p",null,"The details for your ClickHouse Cloud service are available in the ClickHouse Cloud console.  Select the service that you will connect to and click ",(0,o.kt)("strong",{parentName:"p"},"Connect"),":"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"ClickHouse Cloud service connect button",src:a(51523).Z,width:"939",height:"474"})),(0,o.kt)("p",null,"Choose ",(0,o.kt)("strong",{parentName:"p"},"HTTPS"),", and the details are available in an example ",(0,o.kt)("inlineCode",{parentName:"p"},"curl")," command. "),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"ClickHouse Cloud HTTPS connection details",src:a(5814).Z,width:"586",height:"470"})),(0,o.kt)("p",null,"If you are using self-managed ClickHouse, the connection details are set by your ClickHouse administrator."))}r.isMDXComponent=!0},2222:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>u});var n=a(87462),o=(a(67294),a(3905)),i=a(67740);const s={sidebar_label:"Metabase",sidebar_position:131,slug:"/en/connect-a-ui/metabase-and-clickhouse",keywords:["clickhouse","metabase","connect","integrate","ui"],description:"Metabase is an easy-to-use, open source UI tool for asking questions about your data."},r="Connecting Metabase to ClickHouse",l={unversionedId:"en/integrations/data-visualization/metabase-and-clickhouse",id:"en/integrations/data-visualization/metabase-and-clickhouse",title:"Connecting Metabase to ClickHouse",description:"Metabase is an easy-to-use, open source UI tool for asking questions about your data.",source:"@site/docs/en/integrations/data-visualization/metabase-and-clickhouse.md",sourceDirName:"en/integrations/data-visualization",slug:"/en/connect-a-ui/metabase-and-clickhouse",permalink:"/docs/en/connect-a-ui/metabase-and-clickhouse",draft:!1,editUrl:"https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/integrations/data-visualization/metabase-and-clickhouse.md",tags:[],version:"current",sidebarPosition:131,frontMatter:{sidebar_label:"Metabase",sidebar_position:131,slug:"/en/connect-a-ui/metabase-and-clickhouse",keywords:["clickhouse","metabase","connect","integrate","ui"],description:"Metabase is an easy-to-use, open source UI tool for asking questions about your data."},sidebar:"english",previous:{title:"Grafana",permalink:"/docs/en/connect-a-ui/grafana-and-clickhouse"},next:{title:"Superset",permalink:"/docs/en/connect-a-ui/superset-and-clickhouse"}},c={},u=[{value:"Goal",id:"goal",level:2},{value:"1. Gather your connection details",id:"1-gather-your-connection-details",level:2},{value:"2.  Download the ClickHouse plugin for Metabase",id:"2--download-the-clickhouse-plugin-for-metabase",level:2},{value:"3.  Connect Metabase to ClickHouse",id:"3--connect-metabase-to-clickhouse",level:2},{value:"4. Run a SQL query",id:"4-run-a-sql-query",level:2},{value:"5. Ask a question",id:"5-ask-a-question",level:2},{value:"Learn more",id:"learn-more",level:2},{value:"Related Content",id:"related-content",level:2}],p={toc:u},d="wrapper";function m(e){let{components:t,...s}=e;return(0,o.kt)(d,(0,n.Z)({},p,s,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"connecting-metabase-to-clickhouse"},"Connecting Metabase to ClickHouse"),(0,o.kt)("p",null,"Metabase is an easy-to-use, open source UI tool for asking questions about your data. Metabase is a Java application that can be run by simply ",(0,o.kt)("a",{href:"https://www.metabase.com/start/oss/jar",target:"_blank"},"downloading the JAR file")," and running it with ",(0,o.kt)("inlineCode",{parentName:"p"},"java -jar metabase.jar"),". Metabase connects to ClickHouse using a JDBC driver that you download and put in the ",(0,o.kt)("inlineCode",{parentName:"p"},"plugins")," folder:"),(0,o.kt)("h2",{id:"goal"},"Goal"),(0,o.kt)("p",null,"In this guide you will ask some questions of your ClickHouse data with Metabase and visualize the answers.  One of the answers will look like this:"),(0,o.kt)("img",{src:a(51541).Z,class:"image",alt:"Pie Chart"}),(0,o.kt)("p",null),(0,o.kt)("admonition",{title:"Add some data",type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you do not have a dataset to work with you can add one of the examples.  This guide uses the ",(0,o.kt)("a",{parentName:"p",href:"/docs/en/getting-started/example-datasets/uk-price-paid"},"UK Price Paid")," dataset, so you might choose that one.  There are several others to look at in the same documentation category.")),(0,o.kt)("h2",{id:"1-gather-your-connection-details"},"1. Gather your connection details"),(0,o.kt)(i.ZP,{mdxType:"ConnectionDetails"}),(0,o.kt)("h2",{id:"2--download-the-clickhouse-plugin-for-metabase"},"2.  Download the ClickHouse plugin for Metabase"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If you do not have a ",(0,o.kt)("inlineCode",{parentName:"p"},"plugins")," folder, create one as a subfolder of where you have ",(0,o.kt)("inlineCode",{parentName:"p"},"metabase.jar")," saved.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"The plugin is a JAR file named ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse.metabase-driver.jar"),". Download the latest version of the JAR file at ",(0,o.kt)("a",{href:"https://github.com/clickhouse/metabase-clickhouse-driver/release",target:"_blank"},(0,o.kt)("a",{parentName:"p",href:"https://github.com/clickhouse/metabase-clickhouse-driver/releases/latest"},"https://github.com/clickhouse/metabase-clickhouse-driver/releases/latest")))),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Save ",(0,o.kt)("inlineCode",{parentName:"p"},"clickhouse.metabase-driver.jar")," in your ",(0,o.kt)("inlineCode",{parentName:"p"},"plugins")," folder.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Start (or restart) Metabase so that the driver gets loaded properly.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Access Metabse at ",(0,o.kt)("a",{href:"http://localhost:3000/",target:"_blank"},"http://hostname:3000"),'. On the initial startup, you will see a welcome screen and have to work your way through a list of questions. If prompted to select a database, select "',(0,o.kt)("strong",{parentName:"p"},"I'll add my data later"),'":'))),(0,o.kt)("h2",{id:"3--connect-metabase-to-clickhouse"},"3.  Connect Metabase to ClickHouse"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on the gear icon in the top-right corner and select ",(0,o.kt)("strong",{parentName:"p"},"Admin Settings")," to visit your ",(0,o.kt)("a",{href:"http://localhost:3000/admin/settings/setup",target:"_blank"},"Metabase admin page"),".")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on ",(0,o.kt)("strong",{parentName:"p"},"Add a database"),". Alternately, you can click on the ",(0,o.kt)("strong",{parentName:"p"},"Databases")," tab and select the ",(0,o.kt)("strong",{parentName:"p"},"Add database")," button.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"If your driver installation worked, you will see ",(0,o.kt)("strong",{parentName:"p"},"ClickHouse")," in the dropdown menu for ",(0,o.kt)("strong",{parentName:"p"},"Database type"),":"),(0,o.kt)("img",{src:a(18039).Z,class:"image",alt:"Add a ClickHouse database"})),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Give your database a ",(0,o.kt)("strong",{parentName:"p"},"Display name"),", which is a Metabase setting - so use any name you like.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Enter the connection details of your ClickHouse database. Enable a secure connection if your ClickHouse server is configured to use SSL. For example:"),(0,o.kt)("img",{src:a(81143).Z,class:"image",style:{width:"80%"},alt:"Connection details"})),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click the ",(0,o.kt)("strong",{parentName:"p"},"Save")," button and Metabase will scan your database for tables. "))),(0,o.kt)("h2",{id:"4-run-a-sql-query"},"4. Run a SQL query"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Exit the ",(0,o.kt)("strong",{parentName:"p"},"Admin settings")," by clicking the ",(0,o.kt)("strong",{parentName:"p"},"Exit admin")," button in the top-right corner.")),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"In the top-right corner, click the ",(0,o.kt)("strong",{parentName:"p"},"+ New")," menu and notice you can ask questions, run SQL queries, and build a dashboard:"),(0,o.kt)("img",{src:a(67072).Z,class:"image",style:{width:283},alt:"New menu"})),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"For example, here is a SQL query run on a table named ",(0,o.kt)("inlineCode",{parentName:"p"},"uk_price_paid")," that returns the average price paid by year from 1995 to 2022:"),(0,o.kt)("img",{src:a(79055).Z,class:"image",alt:"Run a SQL query"}))),(0,o.kt)("h2",{id:"5-ask-a-question"},"5. Ask a question"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click on ",(0,o.kt)("strong",{parentName:"p"},"+ New")," and select ",(0,o.kt)("strong",{parentName:"p"},"Question"),". Notice you can build a question by starting wtih a database and table. For example, the following question is being asked of a table named ",(0,o.kt)("inlineCode",{parentName:"p"},"uk_price_paid")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"default")," database. Here is a simple question that calculates the average price by town, within the county of Greater Manchester:"),(0,o.kt)("img",{src:a(79421).Z,class:"image",alt:"New question"})),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Click the ",(0,o.kt)("strong",{parentName:"p"},"Visualize")," button to see the results in a tabular view."),(0,o.kt)("img",{src:a(98635).Z,class:"image",alt:"New question"})),(0,o.kt)("li",{parentName:"ol"},(0,o.kt)("p",{parentName:"li"},"Below the results, click the ",(0,o.kt)("strong",{parentName:"p"},"Visualization")," button to change the visualization to a bar chart (or any of the other options avaialable):"),(0,o.kt)("img",{src:a(51541).Z,class:"image",alt:"Pie Chart visualization"}))),(0,o.kt)("h2",{id:"learn-more"},"Learn more"),(0,o.kt)("p",null,"Find more information about Metabase and how to build dashboards by ",(0,o.kt)("a",{href:"https://www.metabase.com/docs/latest/",target:"_blank"},"visiting the Metabase documentation"),"."),(0,o.kt)("h2",{id:"related-content"},"Related Content"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Blog: ",(0,o.kt)("a",{parentName:"li",href:"https://clickhouse.com/blog/visualizing-data-with-metabase"},"Visualizing Data with ClickHouse - Part 3 - Metabase"))))}m.isMDXComponent=!0},18039:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/metabase_01-e67771b0cbf06a1a7f07463f7d477802.png"},81143:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/metabase_02-cd29ddfbc10b74ce64b2558ade1e6be6.png"},67072:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/metabase_03-c176b870b79d2d3c29b6c3e5078c1c55.png"},79055:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/metabase_04-44550f8f83e56d4ac6623519ff633bff.png"},79421:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/metabase_06-3227f70db03a8ea2045162d29e9217bc.png"},98635:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/metabase_07-edd23b45b9e9dc0585ff7a5ca5ff6129.png"},51541:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/metabase_08-ea6ea30f12caa01b7a7737597a52ffd5.png"},51523:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/cloud-connect-button-e2247559831d9d3549387ddfb0deee9b.png"},5814:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/connection-details-https-6ceceb667ac0b41ab35a2ad390b7e2dc.png"}}]);