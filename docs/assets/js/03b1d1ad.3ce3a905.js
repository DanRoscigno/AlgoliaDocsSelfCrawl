"use strict";(self.webpackChunkclickhouse_docs_2_3_0=self.webpackChunkclickhouse_docs_2_3_0||[]).push([[8846],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>k});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)t=l[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var s=a.createContext({}),u=function(e){var n=a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},d=function(e){var n=u(e.components);return a.createElement(s.Provider,{value:n},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},m=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,l=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=u(t),m=r,k=c["".concat(s,".").concat(m)]||c[m]||p[m]||l;return t?a.createElement(k,i(i({ref:n},d),{},{components:t})):a.createElement(k,i({ref:n},d))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var l=t.length,i=new Array(l);i[0]=m;var o={};for(var s in n)hasOwnProperty.call(n,s)&&(o[s]=n[s]);o.originalType=e,o[c]="string"==typeof e?e:r,i[1]=o;for(var u=2;u<l;u++)i[u]=t[u];return a.createElement.apply(null,i)}return a.createElement.apply(null,t)}m.displayName="MDXCreateElement"},45928:(e,n,t)=>{t.d(n,{ZP:()=>o});var a=t(87462),r=(t(67294),t(3905));const l={toc:[]},i="wrapper";function o(e){let{components:n,...t}=e;return(0,r.kt)(i,(0,a.Z)({},l,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"This page is not applicable to ",(0,r.kt)("a",{parentName:"p",href:"https://clickhouse.com/cloud"},"ClickHouse Cloud"),". The procedure documented here is automated in ClickHouse Cloud services.")))}o.isMDXComponent=!0},35655:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>d});var a=t(87462),r=(t(67294),t(3905)),l=t(45928);const i={slug:"/en/guides/sre/keeper/clickhouse-keeper-uuid",sidebar_label:"Creating unique ClickHouse Keeper entries",sidebar_position:20},o="Configuring ClickHouse Keeper with unique paths",s={unversionedId:"en/guides/sre/keeper/clickhouse-keeper-uuid",id:"en/guides/sre/keeper/clickhouse-keeper-uuid",title:"Configuring ClickHouse Keeper with unique paths",description:"Description",source:"@site/docs/en/guides/sre/keeper/clickhouse-keeper-uuid.md",sourceDirName:"en/guides/sre/keeper",slug:"/en/guides/sre/keeper/clickhouse-keeper-uuid",permalink:"/AlgoliaDocsSelfCrawl/en/guides/sre/keeper/clickhouse-keeper-uuid",draft:!1,editUrl:"https://github.com/ClickHouse/clickhouse-docs/blob/main/docs/en/guides/sre/keeper/clickhouse-keeper-uuid.md",tags:[],version:"current",sidebarPosition:20,frontMatter:{slug:"/en/guides/sre/keeper/clickhouse-keeper-uuid",sidebar_label:"Creating unique ClickHouse Keeper entries",sidebar_position:20}},u={},d=[{value:"Description",id:"description",level:2},{value:"Example Environment",id:"example-environment",level:2},{value:"Procedures to set up tables to use {uuid}",id:"procedures-to-set-up-tables-to-use-uuid",level:2},{value:"Testing",id:"testing",level:2},{value:"Alternatives",id:"alternatives",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}],c={toc:d},p="wrapper";function m(e){let{components:n,...t}=e;return(0,r.kt)(p,(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"configuring-clickhouse-keeper-with-unique-paths"},"Configuring ClickHouse Keeper with unique paths"),(0,r.kt)(l.ZP,{mdxType:"SelfManaged"}),(0,r.kt)("h2",{id:"description"},"Description"),(0,r.kt)("p",null,"This article describes how to use the built-in ",(0,r.kt)("inlineCode",{parentName:"p"},"{uuid}")," macro setting\nto create unique entries in ClickHouse Keeper or ZooKeeper. Unique\npaths helps when creating and dropping tables frequently because\nthis avoids having to wait several minutes for Keeper garbage collection\nto remove path entries as each time a path is created a new ",(0,r.kt)("inlineCode",{parentName:"p"},"uuid")," is used\nin that path; paths are never reused."),(0,r.kt)("h2",{id:"example-environment"},"Example Environment"),(0,r.kt)("p",null,"A three node cluster that will be configured to have ClickHouse Keeper\non all three nodes, and ClickHouse on two of the nodes. This provides\nClickHouse Keeper with three nodes (including a tiebreaker node), and\na single ClickHouse shard made up of two replicas."),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"node"),(0,r.kt)("th",{parentName:"tr",align:null},"description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"chnode1.marsnet.local"),(0,r.kt)("td",{parentName:"tr",align:null},"data node - cluster cluster_1S_2R")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"chnode2.marsnet.local"),(0,r.kt)("td",{parentName:"tr",align:null},"data node - cluster cluster_1S_2R")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"chnode3.marsnet.local"),(0,r.kt)("td",{parentName:"tr",align:null},"ClickHouse Keeper tie breaker node")))),(0,r.kt)("p",null,"example config for cluster:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"    <remote_servers>\n        <cluster_1S_2R>\n            <shard>\n                <replica>\n                    <host>chnode1.marsnet.local</host>\n                    <port>9440</port>\n                    <user>default</user>\n                    <password>ClickHouse123!</password>\n                    <secure>1</secure>\n                </replica>\n                <replica>\n                    <host>chnode2.marsnet.local</host>\n                    <port>9440</port>\n                    <user>default</user>\n                    <password>ClickHouse123!</password>\n                    <secure>1</secure>\n                </replica>\n            </shard>\n        </cluster_1S_2R>\n    </remote_servers>\n")),(0,r.kt)("h2",{id:"procedures-to-set-up-tables-to-use-uuid"},"Procedures to set up tables to use {uuid}"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Configure Macros on each server\nexample for server 1:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"    <macros>\n        <shard>1</shard>\n        <replica>replica_1</replica>\n    </macros>\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Notice that we define macros for ",(0,r.kt)("inlineCode",{parentName:"p"},"shard")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"replica"),", but that ",(0,r.kt)("inlineCode",{parentName:"p"},"{uuid}")," is not defined here, it is built-in and there is no need to define.")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Create a Database")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE DATABASE db_uuid \n      ON CLUSTER 'cluster_1S_2R'\n      ENGINE Atomic;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"CREATE DATABASE db_uuid ON CLUSTER cluster_1S_2R\nENGINE = Atomic\n\nQuery id: 07fb7e65-beb4-4c30-b3ef-bd303e5c42b5\n\n\u250c\u2500host\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500port\u2500\u252c\u2500status\u2500\u252c\u2500error\u2500\u252c\u2500num_hosts_remaining\u2500\u252c\u2500num_hosts_active\u2500\u2510\n\u2502 chnode2.marsnet.local \u2502 9440 \u2502      0 \u2502       \u2502                   1 \u2502                0 \u2502\n\u2502 chnode1.marsnet.local \u2502 9440 \u2502      0 \u2502       \u2502                   0 \u2502                0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Create a table on the cluster using the macros and ",(0,r.kt)("inlineCode",{parentName:"li"},"{uuid}"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE db_uuid.uuid_table1 ON CLUSTER 'cluster_1S_2R'\n   (\n     id UInt64,\n     column1 String\n   )\n   ENGINE = ReplicatedMergeTree('/clickhouse/tables/{shard}/db_uuid/{uuid}', '{replica}' )\n   ORDER BY (id);\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"CREATE TABLE db_uuid.uuid_table1 ON CLUSTER cluster_1S_2R\n(\n    `id` UInt64,\n    `column1` String\n)\nENGINE = ReplicatedMergeTree('/clickhouse/tables/{shard}/db_uuid/{uuid}', '{replica}')\nORDER BY id\n\nQuery id: 8f542664-4548-4a02-bd2a-6f2c973d0dc4\n\n\u250c\u2500host\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500port\u2500\u252c\u2500status\u2500\u252c\u2500error\u2500\u252c\u2500num_hosts_remaining\u2500\u252c\u2500num_hosts_active\u2500\u2510\n\u2502 chnode1.marsnet.local \u2502 9440 \u2502      0 \u2502       \u2502                   1 \u2502                0 \u2502\n\u2502 chnode2.marsnet.local \u2502 9440 \u2502      0 \u2502       \u2502                   0 \u2502                0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("ol",{start:4},(0,r.kt)("li",{parentName:"ol"},"Create a distributed table")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"create table db_uuid.dist_uuid_table1 on cluster 'cluster_1S_2R'\n   (\n     id UInt64,\n     column1 String\n   )\n   ENGINE = Distributed('cluster_1S_2R', 'db_uuid', 'uuid_table1' );\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"CREATE TABLE db_uuid.dist_uuid_table1 ON CLUSTER cluster_1S_2R\n(\n    `id` UInt64,\n    `column1` String\n)\nENGINE = Distributed('cluster_1S_2R', 'db_uuid', 'uuid_table1')\n\nQuery id: 3bc7f339-ab74-4c7d-a752-1ffe54219c0e\n\n\u250c\u2500host\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500port\u2500\u252c\u2500status\u2500\u252c\u2500error\u2500\u252c\u2500num_hosts_remaining\u2500\u252c\u2500num_hosts_active\u2500\u2510\n\u2502 chnode2.marsnet.local \u2502 9440 \u2502      0 \u2502       \u2502                   1 \u2502                0 \u2502\n\u2502 chnode1.marsnet.local \u2502 9440 \u2502      0 \u2502       \u2502                   0 \u2502                0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.kt)("h2",{id:"testing"},"Testing"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Insert data into first node (e.g ",(0,r.kt)("inlineCode",{parentName:"li"},"chnode1"),")")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO db_uuid.uuid_table1\n   ( id, column1)\n   VALUES\n   ( 1, 'abc');\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"INSERT INTO db_uuid.uuid_table1 (id, column1) FORMAT Values\n\nQuery id: 0f178db7-50a6-48e2-9a1b-52ed14e6e0f9\n\nOk.\n\n1 row in set. Elapsed: 0.033 sec.\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Insert data into second node (e.g ",(0,r.kt)("inlineCode",{parentName:"li"},"chnode2"),")")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"INSERT INTO db_uuid.uuid_table1\n   ( id, column1)\n   VALUES\n   ( 2, 'def');\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"INSERT INTO db_uuid.uuid_table1 (id, column1) FORMAT Values\n\nQuery id: edc6f999-3e7d-40a0-8a29-3137e97e3607\n\nOk.\n\n1 row in set. Elapsed: 0.529 sec.\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"View records using distributed table")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM db_uuid.dist_uuid_table1;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"SELECT *\nFROM db_uuid.dist_uuid_table1\n\nQuery id: 6cbab449-9e7f-40fe-b8c2-62d46ba9f5c8\n\n\u250c\u2500id\u2500\u252c\u2500column1\u2500\u2510\n\u2502  1 \u2502 abc     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\u250c\u2500id\u2500\u252c\u2500column1\u2500\u2510\n\u2502  2 \u2502 def     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n2 rows in set. Elapsed: 0.007 sec.\n")),(0,r.kt)("h2",{id:"alternatives"},"Alternatives"),(0,r.kt)("p",null,"The default replication path can be defined before hand by macros and using also ",(0,r.kt)("inlineCode",{parentName:"p"},"{uuid}")),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Set default for tables on each node")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-xml"},"<default_replica_path>/clickhouse/tables/{shard}/db_uuid/{uuid}</default_replica_path>\n<default_replica_name>{replica}</default_replica_name>\n")),(0,r.kt)("admonition",{type:"tip"},(0,r.kt)("p",{parentName:"admonition"},"You can also define a macro ",(0,r.kt)("inlineCode",{parentName:"p"},"{database}")," on each node if nodes are used for certain databases.")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"Create table without explicit parameters:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"CREATE TABLE db_uuid.uuid_table1 ON CLUSTER 'cluster_1S_2R'\n   (\n     id UInt64,\n     column1 String\n   )\n   ENGINE = ReplicatedMergeTree\n   ORDER BY (id);\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"CREATE TABLE db_uuid.uuid_table1 ON CLUSTER cluster_1S_2R\n(\n    `id` UInt64,\n    `column1` String\n)\nENGINE = ReplicatedMergeTree\nORDER BY id\n\nQuery id: ab68cda9-ae41-4d6d-8d3b-20d8255774ee\n\n\u250c\u2500host\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500port\u2500\u252c\u2500status\u2500\u252c\u2500error\u2500\u252c\u2500num_hosts_remaining\u2500\u252c\u2500num_hosts_active\u2500\u2510\n\u2502 chnode2.marsnet.local \u2502 9440 \u2502      0 \u2502       \u2502                   1 \u2502                0 \u2502\n\u2502 chnode1.marsnet.local \u2502 9440 \u2502      0 \u2502       \u2502                   0 \u2502                0 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n2 rows in set. Elapsed: 1.175 sec.\n")),(0,r.kt)("ol",{start:3},(0,r.kt)("li",{parentName:"ol"},"Verify it used the settings used in default config")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SHOW CREATE TABLE db_uuid.uuid_table1;\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"SHOW CREATE TABLE db_uuid.uuid_table1\n\nQuery id: 5925ecce-a54f-47d8-9c3a-ad3257840c9e\n\n\u250c\u2500statement\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 CREATE TABLE db_uuid.uuid_table1\n(\n    `id` UInt64,\n    `column1` String\n)\nENGINE = ReplicatedMergeTree('/clickhouse/tables/{shard}/db_uuid/{uuid}', '{replica}')\nORDER BY id\nSETTINGS index_granularity = 8192 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n1 row in set. Elapsed: 0.003 sec.\n")),(0,r.kt)("h2",{id:"troubleshooting"},"Troubleshooting"),(0,r.kt)("p",null,"Example command to get table information and UUID:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM system.tables \nWHERE database = 'db_uuid' AND name = 'uuid_table1';\n")),(0,r.kt)("p",null,"Example command to get information about the table in zookeeper with UUID for the table above"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM system.zookeeper \nWHERE path = '/clickhouse/tables/1/db_uuid/9e8a3cc2-0dec-4438-81a7-c3e63ce2a1cf/replicas';\n")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"Database must be ",(0,r.kt)("inlineCode",{parentName:"p"},"Atomic"),", if upgrading from a previous version, the\n",(0,r.kt)("inlineCode",{parentName:"p"},"default")," database is likely of ",(0,r.kt)("inlineCode",{parentName:"p"},"Ordinary")," type.")),(0,r.kt)("p",null,"To check:\nFor example,"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"SELECT name, engine FROM system.databases WHERE name = 'db_uuid';\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-response"},"SELECT\n    name,\n    engine\nFROM system.databases\nWHERE name = 'db_uuid'\n\nQuery id: b047d459-a1d2-4016-bcf9-3e97e30e49c2\n\n\u250c\u2500name\u2500\u2500\u2500\u2500\u252c\u2500engine\u2500\u2510\n\u2502 db_uuid \u2502 Atomic \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n1 row in set. Elapsed: 0.004 sec.\n")))}m.isMDXComponent=!0}}]);